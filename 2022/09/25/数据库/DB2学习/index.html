

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/logo.png">
  <link rel="icon" href="/img/logo.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Chris">
  <meta name="keywords" content="">
  
    <meta name="description" content="DB2学习">
<meta property="og:type" content="article">
<meta property="og:title" content="DB2学习">
<meta property="og:url" content="https://chris-z-su.github.io/2022/09/25/%E6%95%B0%E6%8D%AE%E5%BA%93/DB2%E5%AD%A6%E4%B9%A0/index.html">
<meta property="og:site_name" content="Bookpackage">
<meta property="og:description" content="DB2学习">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://chris-z-su.github.io/images/image-20221105171553894.png">
<meta property="og:image" content="https://chris-z-su.github.io/images/image-20221105171639758.png">
<meta property="article:published_time" content="2022-09-25T12:03:23.000Z">
<meta property="article:modified_time" content="2022-11-13T02:47:48.000Z">
<meta property="article:author" content="Chris">
<meta property="article:tag" content="技术">
<meta property="article:tag" content="数据库">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://chris-z-su.github.io/images/image-20221105171553894.png">
  
  
  <title>DB2学习 - Bookpackage</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  



  
<link rel="stylesheet" href="/css/iconfont_pdf/iconfont.css">
<link rel="stylesheet" href="/css/iconfont_yule/iconfont.css">
<link rel="stylesheet" href="/css/iconfont_music/iconfont.css">
<link rel="stylesheet" href="/css/iconfont_xiangce/iconfont.css">
<link rel="stylesheet" href="/css/iconfont_shipin/iconfont.css">
<link rel="stylesheet" href="/css/iconfont_bookmark/iconfont.css">



  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"chris-z-su.github.io","root":"/","version":"1.8.14","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":1},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>

  
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Bookpackage</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/pdf/">
                <i class="iconfont icon-pdf"></i>
                资料
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" target="_self" href="javascript:;" role="button"
                 data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <i class="iconfont icon-wenhuayule"></i>
                娱乐
              </a>
              <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                
                  
                  
                  
                  <a class="dropdown-item" href="/music/">
                    <i class="iconfont icon-yinle"></i>
                    音乐
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/galleries/">
                    <i class="iconfont icon-xiangce"></i>
                    相册
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/movies/">
                    <i class="iconfont icon-shipin"></i>
                    视频
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" target="_blank" rel="noopener" href="https://y.qq.com/">
                    
                    QQ音乐
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" target="_blank" rel="noopener" href="https://v.qq.com/">
                    
                    腾讯视频
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/games/yueting/index.html">
                    
                    悦听音乐
                  </a>
                
              </div>
            </li>
          
        
          
          
          
          
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" target="_self" href="javascript:;" role="button"
                 data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <i class="iconfont icon-yule"></i>
                游戏
              </a>
              <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                
                  
                  
                  
                  <a class="dropdown-item" href="/games/clock/index.html">
                    
                    H5时钟
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/games/tower-defense/src/td.html">
                    
                    塔防
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/games/adarkroom/index.html">
                    
                    小黑屋
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/games/muboard/muboard.html">
                    
                    数学白板工具
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/games/UniverseSim/index.html">
                    
                    三体模拟程序
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/games/h5zwjs/index.html">
                    
                    植物大战僵尸
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/games/zhuhe/index.html">
                    
                    爱的魔力转圈圈
                  </a>
                
              </div>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="https://chris-z-su.github.io/NavigationPage/">
                <i class="iconfont icon-bookmark_icon"></i>
                导航
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-link-fill"></i>
                友链
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/3.jpg') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="DB2学习"></span>
          
        </div>

        
          
  <div class="mt-3">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-author" aria-hidden="true"></i>
        Chris
      </span>
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2022-09-25 20:03" pubdate>
          2022年9月25日 晚上
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          <!-- compatible with older versions-->
          32k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          <!-- compatible with older versions-->
          267 分钟
        
      </span>
    

    
    
      
        <span id="busuanzi_container_page_pv" style="display: none">
          <i class="iconfont icon-eye" aria-hidden="true"></i>
          <span id="busuanzi_value_page_pv"></span> 次
        </span>
        
      
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">DB2学习</h1>
            
              <p class="note note-info">
                
                  
                    <!-- compatible with older versions-->
                    本文最后更新于：9 个月前
                  
                
              </p>
            
            <div class="markdown-body">
              
              <h1 id="DB2学习"><a href="#DB2学习" class="headerlink" title="DB2学习"></a>DB2学习</h1><blockquote>
<p>参考：《DB2从入门到精通》 - 明日科技</p>
<p>DB2转换为DECIMAL: <a target="_blank" rel="noopener" href="https://qa.1r1g.com/sf/ask/3114613141/">https://qa.1r1g.com/sf/ask/3114613141/</a></p>
<p>DB2数据库学习总结(一) - round函数用法: <a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_36501591/article/details/82773762">https://blog.csdn.net/qq_36501591/article/details/82773762</a></p>
<p>DB2数据类型: <a target="_blank" rel="noopener" href="https://www.cnblogs.com/xiaojianblogs/p/6288108.html">https://www.cnblogs.com/xiaojianblogs/p/6288108.html</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_40983306/article/details/87862270">https://blog.csdn.net/weixin_40983306/article/details/87862270</a></p>
<p>DB2数据库中的常用的数据类型: <a target="_blank" rel="noopener" href="https://blog.csdn.net/WziH_CSDN/article/details/111191816">https://blog.csdn.net/WziH_CSDN/article/details/111191816</a></p>
<p>DB2中数据类型DECIMAL的用法: <a target="_blank" rel="noopener" href="https://blog.csdn.net/love_hanyu/article/details/84362922">https://blog.csdn.net/love_hanyu/article/details/84362922</a></p>
<p>什么时候索引会失效？: ttps:&#x2F;&#x2F;<a target="_blank" rel="noopener" href="http://www.zhihu.com/question/377039636">www.zhihu.com/question/377039636</a></p>
<p>索引失效的情况及解决(超详细):  <a target="_blank" rel="noopener" href="https://blog.csdn.net/sy_white/article/details/122112440">https://blog.csdn.net/sy_white/article/details/122112440</a></p>
</blockquote>
<h2 id="1-DB2数据类型"><a href="#1-DB2数据类型" class="headerlink" title="1. DB2数据类型"></a>1. DB2数据类型</h2><blockquote>
<p>参考：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/xiaojianblogs/p/6288108.html">https://www.cnblogs.com/xiaojianblogs/p/6288108.html</a></p>
</blockquote>
<p>DB2数据库的内置数据类型主要分成数值型（numeric）、字符串型（character string）、图形字符串（graphic string）、二进制字符串型（binary string）和日期时间型（datetime）。还有一种叫做 DATALINK 的特殊数据类型。DATALINK 值包含了对存储在数据库以外的文件的逻辑引用。</p>
<h3 id="1-数值型-numeric"><a href="#1-数值型-numeric" class="headerlink" title="1) 数值型(numeric)"></a>1) 数值型(numeric)</h3><p><strong>数值型</strong>数据类型包括 SMALLINT、INTEGER、BIGINT、DECIMAL(p,s)、REAL 和 DOUBLE。所有数值都有符号和精度。精度是指除符号以外的二进制或十进制的位数。如果数字的值大于等于零，就认为符号为正。</p>
<ul>
<li>小整型，SMALLINT：小整型是两个字节的整数，精度为 5 位。小整型的范围从 -32,768 到 32,767。</li>
<li>大整型，INTEGER 或 INT：大整型是四个字节的整数，精度为 10 位。大整型的范围从 -2,147,483,648 到 2,147,483,647。</li>
<li>巨整型，BIGINT：巨整型是八个字节的整数，精度为 19 位。巨整型的范围从 -9,223,372,036,854,775,808 到 9,223,372,036,854,775,807。</li>
<li>小数型，DECIMAL(p,s)、DEC(p,s)、NUMERIC(p,s) 或 NUM(p,s)：小数型的值是一种压缩十进制数，它有一个隐含的小数点。压缩十进制数将以二-十进制编码（binary-coded decimal，BCD）记数法的变体来存储。小数点的位置取决于数字的精度（p）和小数位（s）。小数位是指数字的小数部分的位数，它不可以是负数，也不能大于精度。最大精度是 31 位。小数型的范围从 -10^31+1 到 10^31-1。</li>
<li>单精度浮点数（Single-precision floating-point），REAL：单精度浮点数是实数的 32 位近似值。数字可以为零，或者在从 -3.402E+38 到 -1.175E-37 或从 1.175E-37 到 3.402E+38 的范围内。</li>
<li>双精度浮点数（Double-precision floating-point），DOUBLE，DOUBLE PRECISION 或 FLOAT：双精度浮点数是实数的 64 位近似值。数字可以为零，或者在从 -1.79769E+308 到 -2.225E-307 或从 2.225E-307 到 1.79769E+308 的范围内。</li>
</ul>
<h3 id="2-字符串型-character-string"><a href="#2-字符串型-character-string" class="headerlink" title="2) 字符串型(character string)"></a>2) 字符串型(character string)</h3><p><strong>字符串</strong>是字节序列。字符串包括 CHAR(n) 类型的定长字符串和 VARCHAR(n)、LONG VARCHAR 或 CLOB(n) 类型的变长字符串。字符串的长度就是序列中的字节数。</p>
<ul>
<li>定长字符串，CHARACTER(n) 或 CHAR(n)：定长字符串的长度介于 1 到 254 字节之间。如果没有指定长度，那么就认为是 1 个字节。</li>
<li>变长字符串，VARCHAR(n)、CHARACTER VARYING(n) 或 CHAR VARYING(n)：VARCHAR(n) 类型的字符串是变长字符串，最长可达 32,672 字节。</li>
<li>LONG VARCHAR：LONG VARCHAR 类型的字符串是变长字符串，最长可达 32,700 字节。</li>
<li>字符大对象字符串（Character Large Object String），CLOB(n[K　M　G])：CLOB 是变长字符串，最长可以达到 2,147,483,647 字节。如果只指定了 n，那么 n 的值就是最大长度。如果指定了 nK，那么最大长度就是 n<em>1,024（n 的最大值为 2,097,152）。如果指定了 nM，那么最大长度就是 n</em>1,048,576（n 的最大值为 2,048）。如果指定了 nG，那么最大长度就是 n*1,073,741,824（n 的最大值是 2）。CLOB 用于存储基于大单字节字符集（single-byte character set，SBCS）字符的数据或基于混合（多字节字符集（MBCS）和 SBCS）字符的数据。</li>
</ul>
<h3 id="3-图形字符串-graphic-string"><a href="#3-图形字符串-graphic-string" class="headerlink" title="3) 图形字符串(graphic string)"></a>3) 图形字符串(graphic string)</h3><p><strong>图形字符串</strong>是表示双字节字符数据的字节序列。图形字符串包括类型为 GRAPHIC(n) 的定长图形字符串和类型为 VARGRAPHIC(n)、LONG VARGRAPHIC 和 DBCLOB(n) 的变长图形字符串。字符串的长度就是序列中双字节字符的数目。</p>
<ul>
<li>定长图形字符串，GRAPHIC(n)：定长图形字符串的长度介于 1 到 127 个双字节字符之间。如果没有指定长度，就认为是 1 个双字节字符。</li>
<li>变长图形字符串，VARGRAPHIC(n)：VARGRAPHIC(n) 类型的字符串是变长图形字符串，最大长度可达 16,336 个双字节字符。</li>
<li>LONG VARGRAPHIC：LONG VARGRAPHIC 类型的字符串是变长图形字符串，最大长度可达 16,350 个双字节字符。</li>
<li>双字节字符大对象字符串，DBCLOB(n[K　M　G])：双字节字符大对象是变长双字节字符图形字符串，最长可达 1,073,741,823 个字符。如果只指定了 n，那么 n 就是最大长度。如果指定了 nK，那么最大长度就是 n<em>1,024（n 的最大值为 1,048,576）。如果指定了 nM，那么最大长度就是 n</em>1,048,576（n 的最大值为 1,024）。如果指定了 nG，那么最大长度就是 n*1,073,741,824（n 的最大值是 1）。DBCLOB 用于存储基于大 DBCS（双字节字符集，double-byte character set）字符的数据。二进制字符串是字节序列。</li>
</ul>
<h3 id="4-二进制字符串-binary-string"><a href="#4-二进制字符串-binary-string" class="headerlink" title="4) 二进制字符串(binary string)"></a>4) 二进制字符串(binary string)</h3><p><strong>二进制字符串</strong>包括 BLOB(n) 类型的变长字符串，它用于容纳非传统型的数据，诸如图片、语音或混合媒体等，还可以容纳用户定义的类型及用户定义的函数的结构化数据。</p>
<p>　　* 二进制大对象，BLOB(n[K　M　G])：二进制大对象是变长字符串，最长可达 2,147,483,647 字节。如果只指定了 n，那么 n 就是最大长度。如果指定了 nK，那么最大长度就是 n<em>1,024（n 的最大值为 2,097,152）。如果指定了 nM，那么最大长度就是 n</em>1,048,576（n 的最大值为 2,048）。如果指定了 nG，那么最大长度就是 n*1,073,741,824（n 的最大值是 2）。</p>
<h3 id="5-日期时间型-datetime"><a href="#5-日期时间型-datetime" class="headerlink" title="5) 日期时间型(datetime)"></a>5) 日期时间型(datetime)</h3><p><strong>日期时间型</strong>数据类型包括 DATE、TIME 和 TIMESTAMP。日期时间值可在某些算术和字符串操作中使用，而且兼容某些字符串，但它们既不是字符串，也不是数字。</p>
<ul>
<li>DATE：DATE 是一个由三部分组成的值（年、月和日）。年份部分的范围是从 0001 到 9999。月份部分的范围是从 1 到 12。日部分的范围是从 1 到 n，其中 n 的值取决于月份。DATE 列长 10 个字节。</li>
<li>TIME：TIME 是一个由三部分组成的值（小时、分钟和秒）。小时部分的范围是从 0 到 24。分钟和秒部分的范围都是从 0 到 59。如果小时为 24，分钟和秒的值都是 0。TIME 列长 8 个字节。</li>
<li>TIMESTAMP：TIMESTAMP 是一个由七部分组成的值（年、月、日、小时、分钟、秒和微秒）。年份部分的范围是从 0001 到 9999。月份部分的范围是从 1 到 12。日部分的范围是从 1 到 n，其中 n 的值取决于月份。小时部分的范围是从 0 到 24。分钟和秒部分的范围都是从 0 到 59。微秒部分的范围是从 000000 到 999999。如果小时是 24，那么分钟值、秒的值和微秒的值都是 0。TIMESTAMP 列长 26 个字节。日期时间值的字符串表示：尽管 DATE、TIME 和 TIMESTAMP 的值的内部表示对用户是透明的，日期、时间和时间戳记也可以用字符串来表示，CHAR 标量函数（请参阅 SQL 的“词类（parts of speech）”）可以用于创建日期时间值的字符串表示。</li>
<li>日期值的字符串表示是一个以数字开始，长度不少于 8 个字符的字符串。日期值的月份和日部分中前面的零可以省略。</li>
<li>时间值的字符串表示是以数字开头，长度不少于 4 个字符的字符串。时间值的小时部分前面的零可以省略，秒部分可以完全省略。如果秒的值没有指定，那么就认为是 0。</li>
<li>时间戳记值的字符串表示是以数字开头，长度不少于 16 个字符的字符串。完整的时间戳记字符串表示形式为 yyyy-mm-dd-hh.mm.ss.nnnnnn。时间戳记值的月、日或小时等几部分前面的零可以省略，微秒可以截断或完全省略。如果任何时间戳记值的微秒部分尾零被省略掉了，那么将假定空缺的数位上为零</li>
</ul>
<h2 id="2-Oracle和DB2数据类型的比较"><a href="#2-Oracle和DB2数据类型的比较" class="headerlink" title="2.Oracle和DB2数据类型的比较"></a>2.Oracle和DB2数据类型的比较</h2><p>Oracle 和DB2 数据类型的比较</p>
<table>
<thead>
<tr>
<th>Oracle</th>
<th></th>
<th>DB2&#x2F;400</th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>Oracle数据类型</td>
<td>注意事项</td>
<td>DB2 UDB数据类型</td>
<td>注意事项</td>
</tr>
<tr>
<td>DATE</td>
<td></td>
<td>DATE<br/>TIME<br/>TIMESTAMP</td>
<td>如果只使用MM&#x2F;DD&#x2F;YYY,那么使用DATE类型。<br/>如果只使用HH:MM:SS, 那么使用TIME类型。<br/>如果要使用日期和时间，则使用时间戳类型（TIMESTAMP）<br/>能使用Oracle中的TO_CHAR()函数来取DATE的字串来分别和DB2&#x2F;400的DATE、TIME相匹配。</td>
</tr>
<tr>
<td>VARCHAR2(n)</td>
<td>n&lt;&#x3D;4000</td>
<td>CHAR(n)<br/>VARCHAR(n)</td>
<td>若n&lt;&#x3D;32766,则使用DB2&#x2F;400中的CHAR类型、VARCHAR</td>
</tr>
<tr>
<td>LONG</td>
<td>n&lt;&#x3D;2GB</td>
<td>VARCHAR(n)<br/>CLOB(n)</td>
<td>若n&lt;&#x3D;32K,则使用DB2&#x2F;400中的CHAR类型、VARCHAR。<br/>若32K&#x3D;&lt; n &lt;&#x3D;2GB，则使用CLOB。</td>
</tr>
<tr>
<td>ROW&amp;<br/>LONG ROW</td>
<td>n&lt;&#x3D;255</td>
<td>CHAR(n) FOR BIT DATA<br/>VARCHAR(n) FOR BIT DATA <br/>BLOB(n)</td>
<td>若n&lt;&#x3D;32K, 则使用CHAR(n) FOR BIT DATA 或<br/>VARCHAR(n) FOR BIT DATA <br/>若n&lt;&#x3D;2GB, 则使用BLOB(n)</td>
</tr>
<tr>
<td>BLOB</td>
<td>n&lt;&#x3D;4GB</td>
<td>BLOB(n)</td>
<td>若n&lt;&#x3D;2GB, 则使用BLOB(n)</td>
</tr>
<tr>
<td>CLOB</td>
<td>n&lt;&#x3D;4GB</td>
<td>CLOB(n)</td>
<td>若n&lt;&#x3D;2GB, 则使用CLOB(n)</td>
</tr>
<tr>
<td>NCLOB</td>
<td>n&lt;&#x3D;4GB</td>
<td>DBCLOB(n)</td>
<td>若n&lt;&#x3D;2GB, 则使用DBCLOB(n&#x2F;2)</td>
</tr>
<tr>
<td>NUMBER</td>
<td></td>
<td>SMALLINT&#x2F;INTEGER&#x2F;BIGINT<br/>DECIMAL(p,s)&#x2F;NUMBER(p,s)<br/>Float(n)&#x2F; REAL&#x2F;DOUBLE</td>
<td>若Oracle中定义NUMBER(p) 或 NUMBER(p,s), 则使用SAMLLINT&#x2F;INTEGER&#x2F;BIGINT<br/>若Oracle中定义NUMBER(p,s), 则使用DECIMAL(p,s)<br/>若Oracle中定义NUMBER,则使用FLOAT(n)&#x2F;REAL&#x2F;DOUBLE</td>
</tr>
</tbody></table>
<p>说明：<br>　　<strong>NUMBER</strong></p>
<p>　　Oracle中的NUMBER类型可以对应DB2&#x2F;400中的很多类型，这种对应关系要依赖于Oracle中number将用于保存何种类型的数据，是整型还是带有小数位的实型数据，另外还要考虑类型所占用的存储空间，例如:SAMLLINT占2 byte, INTEGER占4 byte; BIGINT占8 byte;Oracle中的NUMBER类型所占用的存储空间要根据它的定义而定，例如缺省精度下的NUMBER有38个数字长，占用20 byte的空间。具体的对应关系请参照上表。<br>　　<strong>ROW and LOB类型</strong><br>　　DB2&#x2F;400提供VARCHAR和CLOB与Oracel中的RAW和LONG RAW相对应。Oracle也支持大对象:BLOB、CLOB、CLOB和NCLOB, Oracle中的BLOB和CLOB可以提供4GB的空间，而DB2&#x2F;400中的BLOB和CLOB只能存放2GB的数据;DB2&#x2F;400中的DBCLOB与Oracle中的NCLOB 2GB相对应。Oracle 中的BFILE数据类型用于管理数据库以外的二进制数据，数据库中的表将指向数据库外部的存放的BFILE文件，DB2&#x2F;400也提供一个类似的数据类型DATALINK相对应。<br>　　<strong>ROWID</strong><br>　　Oracle ROWIND虚拟列用于对表中的某一列进行唯一标示，DB2&#x2F;400中也有这样的数据类型ROWID，它与Oracle中的ROWID的功能相似。DB2&#x2F;400中的ROWID可以存放40 byte的数据用来唯一标示表中的每一行，它没有ccsid属性，这些信息中没有关于datafile、 block 或 row的信息。例如:<br>CREATE TABLE LIBRARYNAME&#x2F;ORDERS2 (ORDERNO ROWID, SHIPPED_TO VARCHAR (36) , ORDER_DATE DATE) ORDERNO的数据类型为ROWID，用于存放订单号，每当插入一行时，系统自动生成一个值，存放进这个字段。可以用OPERATION NAVIGATOR查看它的内容。<br>　　<strong>Character type</strong><br>　　DB2&#x2F;400的CHAR、VARCHAR类型与Oracle中的VARCHAR2(n)类型相对应，但是Oracle中的VARCHAR2(n)类型仅用于存放较小的字符串，这里的n小于4000，因此在这种情况下，最好用定长的CHAR(N)类型与Oracle的VARCHAR2(n)相对应，这样不仅可以提高效率，还可以节省存储空间，若使用VARCHAR(n)类型最好用ALLOCATE参数，这样可以提高数据库的性能,它可以减少内存和硬盘之间的输入&#x2F;输出操作。<br>要注意DB2&#x2F;400中的字符串中文输入问题，要想在DB2&#x2F;400上输入中文应用这样的SQL创建表，这里的CCSID 935,代表简体中文。</p>
<h2 id="3-DB2数据类型转换"><a href="#3-DB2数据类型转换" class="headerlink" title="3. DB2数据类型转换"></a>3. DB2数据类型转换</h2><p>DB2数据库伪表：SYSIBM.SYSDUMMY1</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-number">1</span> <span class="hljs-keyword">from</span> SYSIBM.SYSDUMMY1;<br># 在不更改代码的情况下创建一张名为DUAL的视图功能与SYSIBM.SYSDUMMY1相同。<br><span class="hljs-keyword">select</span> <span class="hljs-number">1</span> <span class="hljs-keyword">from</span> SYSIBM.DUAL;<br></code></pre></td></tr></table></figure>

<p><strong>DUAL 表</strong></p>
<blockquote>
<p>参考：<a target="_blank" rel="noopener" href="https://www.ibm.com/docs/zh/db2/11.1?topic=SSEPGG_11.1.0/com.ibm.db2.luw.apdv.porting.doc/doc/r0052874.htm">https://www.ibm.com/docs/zh/db2/11.1?topic=SSEPGG_11.1.0/com.ibm.db2.luw.apdv.porting.doc/doc/r0052874.htm</a></p>
</blockquote>
<p>任何对 DUAL 表进行的未限定引用将解析为一个内置视图，该视图返回一行以及一列。该列的名称为 DUMMY，值为“X”。DUAL 表类似于 SYSIBM.SYSDUMMY1 表。</p>
<p>要启用 DUAL 表支持，请将 <strong>DB2_COMPATIBILITY_VECTOR</strong> 注册表变量设置为十六进制值 0x02（位位置 2），然后停止并重新启动该实例：</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs powershell">db2<span class="hljs-built_in">set</span> DB2_COMPATIBILITY_VECTOR=<span class="hljs-number">02</span><br>db2stop<br>db2<span class="hljs-built_in">start</span><br></code></pre></td></tr></table></figure>

<p>要激活针对 Oracle 应用程序的所有兼容性功能，请将 <strong>DB2_COMPATIBILITY_VECTOR</strong> 注册表变量设置为 ORA，然后停止并重新启动该实例：</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs powershell">db2<span class="hljs-built_in">set</span> DB2_COMPATIBILITY_VECTOR=ORA<br>db2stop<br>db2<span class="hljs-built_in">start</span><br></code></pre></td></tr></table></figure>

<p>将对 DUAL 表进行的未限定表引用解析为 SYSIBM.DUAL。</p>
<p>如果存在用户定义的名为 DUAL 的表，那么 Db2® 服务器会解析对该用户定义表的表引用。</p>
<p>示例：</p>
<p>通过从 DUAL 中进行选择来生成随机数。</p>
<figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">SELECT</span> RAND() <span class="hljs-keyword">AS</span> RANDOM_NUMBER <span class="hljs-keyword">FROM</span> SYSIBM.DUAL;<br></code></pre></td></tr></table></figure>

<p><img src="/../images/image-20221105171553894.png" srcset="/img/loading.gif" lazyload alt="image-20221105171553894"></p>
<p>检索 CURRENT SCHEMA 专用寄存器的值。</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">SET</span> SCHEMA = MYSCHEMA;<br><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">CURRENT</span> <span class="hljs-keyword">SCHEMA</span> <span class="hljs-keyword">AS</span> <span class="hljs-built_in">CURRENT_SCHEMA</span> <span class="hljs-keyword">FROM</span> DUAL;<br></code></pre></td></tr></table></figure>

<p><img src="/../images/image-20221105171639758.png" srcset="/img/loading.gif" lazyload alt="image-20221105171639758"></p>
<p>对应的Oracle伪表：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> SYSDATE <span class="hljs-keyword">FROM</span> DUAL;<br></code></pre></td></tr></table></figure>

<h3 id="1-数字转DECIMAL类型"><a href="#1-数字转DECIMAL类型" class="headerlink" title="1) 数字转DECIMAL类型"></a>1) 数字转DECIMAL类型</h3><blockquote>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_40983306/article/details/87862270">https://blog.csdn.net/weixin_40983306/article/details/87862270</a></p>
</blockquote>
<p>decimal(p,s) </p>
<p>p表示：不包括小数点，不包括符号位，所能存数字的总位数（包括小数部分和整数部分）<br>s表示：小数部分数字的位数，由此可知整数部分的位数为p-s;</p>
<p>举个例子：</p>
<p>decimal(5,2) 能够表示的数的范围 -999.99到999.99; </p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"># <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">10</span>,<span class="hljs-number">2</span>) 不含小数点总共<span class="hljs-number">10</span>位，小数位<span class="hljs-number">2</span>位<br><span class="hljs-keyword">select</span> <span class="hljs-built_in">CAST</span>(<span class="hljs-number">1234567890</span> <span class="hljs-keyword">AS</span> <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">10</span>,<span class="hljs-number">2</span>)) <span class="hljs-keyword">from</span> SYSIBM.SYSDUMMY1;<br><br># 两位小数<br><span class="hljs-keyword">select</span> <span class="hljs-built_in">CAST</span>(<span class="hljs-number">12345678.12</span> <span class="hljs-keyword">AS</span> <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">10</span>,<span class="hljs-number">2</span>)) <span class="hljs-keyword">from</span> SYSIBM.SYSDUMMY1;<br></code></pre></td></tr></table></figure>



<p>数字长度超出报错：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-built_in">CAST</span>(<span class="hljs-number">123456789</span> <span class="hljs-keyword">AS</span> <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">10</span>,<span class="hljs-number">2</span>)) <span class="hljs-keyword">from</span> SYSIBM.SYSDUMMY1;<br></code></pre></td></tr></table></figure>

<p>SQL 错误 [22003]: 在数字数据类型转换期间发生溢出。. SQLCODE&#x3D;-413, SQLSTATE&#x3D;22003, DRIVER&#x3D;4.26.14</p>
<h3 id="2-decimal函数"><a href="#2-decimal函数" class="headerlink" title="2) decimal函数"></a>2) decimal函数</h3><p>decimal(5.15, 15, 2)</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-built_in">CAST</span>(<span class="hljs-number">1234567890</span> <span class="hljs-keyword">AS</span> <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">10</span>,<span class="hljs-number">2</span>)) <span class="hljs-keyword">from</span> SYSIBM.SYSDUMMY1;<br><br><span class="hljs-type">decimal</span>(<span class="hljs-number">5.15</span>, <span class="hljs-number">15</span>, <span class="hljs-number">2</span>)<br><span class="hljs-type">decimal</span>(<span class="hljs-number">5.15</span><span class="hljs-operator">/</span><span class="hljs-number">3.27</span>, <span class="hljs-number">15</span>, <span class="hljs-number">2</span>)<br>round((<span class="hljs-number">5.15</span><span class="hljs-operator">/</span><span class="hljs-number">3.27</span>, <span class="hljs-number">2</span>)<br><span class="hljs-type">float</span>(<span class="hljs-number">5.15</span>)<br><span class="hljs-keyword">double</span>(<span class="hljs-number">5.15</span>)<br><span class="hljs-built_in">coalesce</span>(<span class="hljs-number">5.15</span>, <span class="hljs-number">0</span>)<br><span class="hljs-keyword">case</span> <span class="hljs-keyword">when</span> a<span class="hljs-operator">=</span> <span class="hljs-number">0</span> <span class="hljs-keyword">then</span> <span class="hljs-number">0</span> <span class="hljs-keyword">else</span> <span class="hljs-number">1</span> <span class="hljs-keyword">end</span>;<br><br></code></pre></td></tr></table></figure>





<p><a target="_blank" rel="noopener" href="https://www.ibm.com/docs/zh/db2/11.1?topic=dum-get-hash-value-function-compute-hash-value-given-string">https://www.ibm.com/docs/zh/db2/11.1?topic=dum-get-hash-value-function-compute-hash-value-given-string</a></p>
<p><a target="_blank" rel="noopener" href="https://www.ibm.com/docs/zh/db2/11.5">https://www.ibm.com/docs/zh/db2/11.5</a></p>
<p>D:\Program Files\instantclient_19_10\network\admin</p>
<h2 id="4-索引"><a href="#4-索引" class="headerlink" title="4. 索引"></a>4. 索引</h2><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><br><span class="hljs-comment">-- 索引</span><br><span class="hljs-comment">-- 索引是表的一个或多个列的键值的有序列表，可以针对一个列或者多个列建索引。</span><br><span class="hljs-comment">-- 如果没有索引：对表添加数据时，该数据将被追加到表的最后。不存在固有的数据顺序。搜索特定数据行时，必须检查从第一行到最后一行的所有行。</span><br><span class="hljs-comment">-- 创建索引的原因有两个：</span><br><span class="hljs-comment">-- 确保一个或多个列值的唯一性</span><br><span class="hljs-comment">-- 提高表查询的性能。DB2优化器使用索引提高查询时的性能，或者以索引的顺序显示查询结果。</span><br><br><span class="hljs-comment">-- 索引可以定义为惟一的或非唯一的</span><br><span class="hljs-comment">-- 非唯一的索引允许重复的键值；</span><br><span class="hljs-comment">-- 唯一的索引只允许一个键值在列表中出现一次。唯一的索引允许出现单个空值。然而，第二个空值会导致重复现象，因此不允许。</span><br><span class="hljs-comment">-- 创建索引可以使用create index语句</span><br><span class="hljs-comment">-- 为表中的列指定primary key或unique约束，会隐式地创建索引。</span><br><span class="hljs-comment">-- 索引可以创建为升序、降序或双向。选择哪个选项取决于应用程序如何访问数据。</span><br><span class="hljs-comment">-- 为员工id创建索引</span><br><span class="hljs-keyword">create</span> <span class="hljs-keyword">index</span> iemployee <span class="hljs-keyword">on</span> employee(id)<br><span class="hljs-comment">-- 在默认情况下，索引按升序创建，但也可以创建降序索引。甚至可以为索引中的各个列指定不同的顺序。</span><br><span class="hljs-keyword">create</span> <span class="hljs-keyword">index</span> iemployee <span class="hljs-keyword">on</span> employee(id <span class="hljs-keyword">desc</span>, <span class="hljs-type">name</span> <span class="hljs-keyword">asc</span>)<br><span class="hljs-comment">-- 升序索引利于min列函数的结果；降序索引利于max列函数的结果。如果应用程序还需要数据按与索引相反的顺序排序，那么DB2允许创建双向索引。</span><br><span class="hljs-keyword">create</span> <span class="hljs-keyword">index</span> iemployee <span class="hljs-keyword">on</span> employee(id) allow <span class="hljs-keyword">reverse</span> scans<br><span class="hljs-comment">-- 在索引中包含列</span><br><span class="hljs-comment">-- 在创建索引时，可以选择包含额外的列数据，这些额外的列数据将与键存储在一起，但实际上它们不是键本身的一部分，所以不被排序。在索引中包含额外列的主要原因是为了提高某些查询的性能：因为索引页面中已经提供了数据值，DB2就不需要访问数据页面。只能为唯一索引定义包含的列。</span><br><span class="hljs-comment">-- 假设我们经常做如下查询：</span><br><span class="hljs-keyword">select</span> id, <span class="hljs-type">name</span> <span class="hljs-keyword">from</span> employee <span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> id<br><span class="hljs-comment">-- 建议创建如下索引</span><br><span class="hljs-keyword">create</span> <span class="hljs-keyword">unique</span> <span class="hljs-keyword">index</span> iemployeeid <span class="hljs-keyword">on</span> employee(id) <span class="hljs-keyword">include</span>(<span class="hljs-type">name</span>)<br><span class="hljs-comment">-- 创建一个索引花费的时间比较长，DB2必须读取每一行来提取键，对这些键进行排序，然后将键值列表写到数据库中。如果表比较大，那么将使用临时表空间对键进行排序。</span><br><span class="hljs-comment">-- 索引存储在表空间中。如果表驻留在数据库管理的表空间中，就可以选择将索引放在不同的表空间中。在创建表时，可以使用indexes in子句指定索引放置的表空间。</span><br><span class="hljs-comment">-- 索引是值的额外副本，所以当表中的数据被更新时，它们也必须被更新。如果表数据经常被更新，就要考虑额外的索引会对更新性能产生什么样的影响。</span><br><br><span class="hljs-comment">-- 索引分类：</span><br><span class="hljs-comment">-- 唯一索引和非唯一索引</span><br><span class="hljs-comment">-- 集群索引和非集群索引</span><br><span class="hljs-comment">-- 分区索引和非分区索引</span><br><span class="hljs-comment">-- 双向索引</span><br><span class="hljs-comment">-- 基于表达式的索引</span><br></code></pre></td></tr></table></figure>

<h2 id="5-表空间和表"><a href="#5-表空间和表" class="headerlink" title="5. 表空间和表"></a>5. 表空间和表</h2><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs n1ql">-- https://www.ibm.com/products/db2-database/pricing<br>-- https://epwt-www.mybluemix.net/software/support/trial/cst/programwebsite.wss?siteId=1120&amp;tabId=2932&amp;p=null&amp;h=null#<br><br>-- 查看所有表空间<br>db2 list tablespaces<br>-- 创建表，指定特定的表空间<br>db2 &quot;<span class="hljs-keyword">create</span> table employee(id integer) <span class="hljs-keyword">in</span> userspace1<span class="hljs-string">&quot;</span><br><span class="hljs-string">-- 查询employee表的所在的表空间</span><br><span class="hljs-string">db2 &quot;</span><span class="hljs-keyword">select</span> tabname, tbspace <span class="hljs-keyword">from</span> syscat.tables <span class="hljs-keyword">where</span> tabname = <span class="hljs-string">&#x27;employee&#x27;</span><span class="hljs-string">&quot;</span><br><span class="hljs-string"></span><br><span class="hljs-string">-- 修改表结构</span><br><span class="hljs-string">-- 查看表结构信息</span><br><span class="hljs-string">db2 describe table employee</span><br><span class="hljs-string">-- 为表添加一列</span><br><span class="hljs-string">db2 &quot;</span><span class="hljs-keyword">alter</span> table employee add depart_id integer<span class="hljs-string">&quot;</span><br><span class="hljs-string">-- 修改表某列的数据类型</span><br><span class="hljs-string">db2 &quot;</span><span class="hljs-keyword">alter</span> table employee <span class="hljs-keyword">alter</span> name <span class="hljs-keyword">set</span> data <span class="hljs-built_in">type</span> varchar(<span class="hljs-number">20</span>) <span class="hljs-keyword">alter</span> gender <span class="hljs-keyword">set</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">null</span><span class="hljs-string">&quot;</span><br><span class="hljs-string">-- 删除表，表中的数据和表定义都会被删除。如果为表定义了索引或者约束，也会同时被删除。</span><br><span class="hljs-string">db2 &quot;</span><span class="hljs-keyword">drop</span> table employee<span class="hljs-string">&quot;</span><br></code></pre></td></tr></table></figure>

<h2 id="6-DB2操作命令"><a href="#6-DB2操作命令" class="headerlink" title="6. DB2操作命令"></a>6. DB2操作命令</h2><blockquote>
<p>参考：<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_39881859/article/details/111515762">https://blog.csdn.net/weixin_39881859/article/details/111515762</a></p>
</blockquote>
<h3 id="1-打开DB2命令窗口"><a href="#1-打开DB2命令窗口" class="headerlink" title="1) 打开DB2命令窗口"></a>1) 打开DB2命令窗口</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">C:\Users\db2admin&gt;db2cmd<br>C:\Users\db2admin&gt;<br></code></pre></td></tr></table></figure>

<h3 id="2-操作数据库实例"><a href="#2-操作数据库实例" class="headerlink" title="2) 操作数据库实例"></a>2) 操作数据库实例</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">启动数据库实例</span><br>C:\Users\db2admin&gt;db2start<br>2022-08-24 21:03:49     0   0   SQL1026N  数据库管理器已活动。<br>SQL1026N  数据库管理器已活动。<br><br>C:\Users\db2admin&gt;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">停止数据库实例</span><br>C:\Users\db2admin&gt;db2stop<br></code></pre></td></tr></table></figure>

<h3 id="3-连接数据库"><a href="#3-连接数据库" class="headerlink" title="3) 连接数据库"></a>3) 连接数据库</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">连接到数据库</span><br>db2 connect to [dbname] user [username] using [password]<br><span class="hljs-meta prompt_"># </span><span class="language-bash">示例</span><br>C:\Users\db2admin&gt;db2 connect to SAMPLE<br><br>   数据库连接信息<br><br> 数据库服务器         = DB2/NT64 11.5.7.0<br> SQL 授权标识         = DB2ADMIN<br> 本地数据库别名       = SAMPLE<br><br>C:\Users\db2admin&gt;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">断开数据库连接</span><br>db2 connect reset<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">删除数据库</span><br>db2 drop database [dbname]<br><span class="hljs-meta prompt_"># </span><span class="language-bash">(执行此操作要小心) 如果不能删除，断开所有数据库连接或者重启db2</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">备份数据库</span><br>db2 backup db<br><span class="hljs-meta prompt_"># </span><span class="language-bash">备注：执行以上命令之前需要断开数据库连接</span><br>1、 db2 backup db btpdbs<br>2、 db2move btpdbs export<br>db2look -d btpdbs -e -x [-a] -o crttbl.sql<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">在线备份数据库</span><br>db2 -v &quot;BACKUP DATABASE ONLINE TO WITH 2 BUFFERS BUFFER 1024 INCLUDE LOGS WITHOUT PROMPTING&quot;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">恢复数据库</span><br>db2 restore db<br>1、 db2 restore db btpdbs without rolling forward<br>2、 db2 -tvf crtdb.sql<br>crtdb.sql文件内容：create db btpdbs on /db2catalog<br>db2 -stvf crttbl.sql<br>db2move btpdbs import<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">在线恢复数据库</span><br>db2 &quot;RESTORE DB TO LOGTARGET WITHOUT PROMPTING&quot;<br>db2 &quot;ROLLFORWARD DB TO END OF LOGS AND STOP&quot; ...<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">导出数据文件</span><br>db2move export<br>[-sn ]<br>[-tn ]<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">导入数据文件</span><br>db2move import<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">获取db2数据库管理配置环境信息</span><br>db2 get dbm cfg<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">获取db2某个数据库数据库管理配置环境信息</span><br>db2 get db cfg for<br><span class="hljs-meta prompt_"># </span><span class="language-bash">或者：连接至某个数据库以后执行db2 get db cfg</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">更改db2日志空间的大小</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">备注：以下命令为了防止db2数据库过份使用硬盘空间而设，仅用于开发者自己机器上的db2，如果是服务器，则参数需要修改。</span><br>db2 UPDATE DB CFG FOR USING logretain OFF logprimary 3 logsecond 2 logfilsiz 25600;<br><span class="hljs-meta prompt_"># </span><span class="language-bash">如果页大小是4KB，则以上命令创建3个100M的日志文件，占用300MB硬盘空间。25600*4KB=102400KB。</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">获取数据库管理器的快照数据</span><br>db2 –v get snapshot for dbm<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">显示进行程号</span><br>db2 list applications show detail<br></code></pre></td></tr></table></figure>

<h3 id="4-列出所有数据库"><a href="#4-列出所有数据库" class="headerlink" title="4) 列出所有数据库"></a>4) 列出所有数据库</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs shell">C:\Users\db2admin&gt;db2 list db directory<br><br> 系统数据库目录<br><br> 目录中的条目数 = 1<br><br>数据库 1 条目：<br><br> 数据库别名                      = SAMPLE<br> 数据库名称                               = SAMPLE<br> 本地数据库目录                  = D:<br> 数据库发行版级别                = 15.00<br> 注释                            =<br> 目录条目类型                    = 间接<br> 目录数据库分区号                  = 0<br> 备用服务器主机名                =<br> 备用服务器端口号                =<br><br><br>C:\Users\db2admin&gt;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">列出所有激活的数据库</span><br>C:\Users\db2admin&gt;db2 list active databases<br></code></pre></td></tr></table></figure>

<h3 id="5-查看表空间列表"><a href="#5-查看表空间列表" class="headerlink" title="5) 查看表空间列表"></a>5) 查看表空间列表</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><code class="hljs shell">C:\Users\db2admin&gt;db2 list tablespaces<br>SQL1024N  不存在数据库连接。  SQLSTATE=08003<br><br>C:\Users\db2admin&gt;<br>C:\Users\db2admin&gt;db2 list tablespaces<br><br>           当前数据库的表空间<br><br> 表空间标识                          = 0<br> 名称                       = SYSCATSPACE<br> 类型                                       = 数据库管理空间<br> 内容                                = 所有持久数据。常规表空间。<br> 状态                   = 0x0000<br>   详细解释：<br>     正常<br><br> 表空间标识                          = 1<br> 名称                       = TEMPSPACE1<br> 类型                                       = 系统管理空间<br> 内容                                = 系统临时数据<br> 状态                   = 0x0000<br>   详细解释：<br>     正常<br><br> 表空间标识                          = 2<br> 名称                       = USERSPACE1<br> 类型                                       = 数据库管理空间<br> 内容                                = 所有持久数据。大型表空间。<br> 状态                   = 0x0000<br>   详细解释：<br>     正常<br><br> 表空间标识                          = 3<br> 名称                       = IBMDB2SAMPLEREL<br> 类型                                       = 数据库管理空间<br> 内容                                = 所有持久数据。大型表空间。<br> 状态                   = 0x0000<br>   详细解释：<br>     正常<br><br> 表空间标识                          = 4<br> 名称                       = IBMDB2SAMPLEXML<br> 类型                                       = 数据库管理空间<br> 内容                                = 所有持久数据。大型表空间。<br> 状态                   = 0x0000<br>   详细解释：<br>     正常<br><br> 表空间标识                          = 5<br> 名称                       = SYSTOOLSPACE<br> 类型                                       = 数据库管理空间<br> 内容                                = 所有持久数据。大型表空间。<br> 状态                   = 0x0000<br>   详细解释：<br>     正常<br><br><br>C:\Users\db2admin&gt;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">创建临时表空间</span><br>DB2 CREATE USER TEMPORARY TABLESPACE STMASPACE PAGESIZE 32 K MANAGED BY DATABASE USING (FILE &#x27;D:\DB2_TAB\STMASPACE.F1&#x27; 10000)<br><br>EXTENTSIZE 256<br><br></code></pre></td></tr></table></figure>



<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"># cmd查看所有数据库 db2_DB2常用命令<br><span class="hljs-number">1</span>、 打开命令行窗口<br><br><span class="hljs-meta">#db2cmd</span><br><br><span class="hljs-number">2</span>、 打开控制中心<br><br># db2cmd db2cc<br><br><span class="hljs-number">3</span>、 打开命令编辑器<br><br>db2cmd db2ce<br><br>=====操作数据库命令=====<br><br><span class="hljs-number">4</span>、 启动数据库实例<br><br><span class="hljs-meta">#db2start</span><br><br>[<span class="hljs-number">5</span>、 停止数据库实例<br><br><span class="hljs-meta">#db2stop</span><br><br>如果你不能停止数据库由于激活的连接，在运行db2stop前执行db2 force application <span class="hljs-keyword">all</span>就可以了 /db2stop force<br><br><span class="hljs-number">6</span>、 创建数据库<br><br><span class="hljs-meta">#db2 create db [dbname]</span><br><br><span class="hljs-number">7</span>、 连接到数据库<br><br><span class="hljs-meta">#db2 connect to [dbname] user [username] using [password]</span><br><br><span class="hljs-number">8</span>、 断开数据库连接<br><br><span class="hljs-meta">#db2 connect reset</span><br><br><span class="hljs-number">9</span>、 列出所有数据库<br><br><span class="hljs-meta">#db2 list db directory</span><br><br><span class="hljs-number">10</span>、 列出所有激活的数据库<br><br><span class="hljs-meta">#db2 list active databases</span><br><br><span class="hljs-number">11</span>、 列出所有数据库配置<br><br><span class="hljs-meta">#db2 get db cfg</span><br><br><span class="hljs-number">12</span>、 删除数据库<br><br><span class="hljs-meta">#db2 drop database [dbname]</span><br><br>(执行此操作要小心) 如果不能删除，断开所有数据库连接或者重启db2<br><br>=========操作数据表命令==========<br><br><span class="hljs-number">13</span>、 列出所有用户表<br><br><span class="hljs-meta">#db2 list tables</span><br><br><span class="hljs-number">14</span>、列出所有系统表<br><br><span class="hljs-meta">#db2 list tables for system</span><br><br><span class="hljs-number">15</span>、列出所有表<br><br><span class="hljs-meta">#db2 list tables for all</span><br><br><span class="hljs-number">16</span>、 列出系统表<br><br><span class="hljs-meta">#db2 list tables for system</span><br><br><span class="hljs-number">17</span>、列出用户表<br><br><span class="hljs-meta">#db2 list tables for user</span><br><br><span class="hljs-number">18</span>、 列出特定用户表<br><br><span class="hljs-meta">#db2 list tables for schema [user]</span><br><br><span class="hljs-number">19</span>、 创建一个与数据库中某个表(t2)结构相同的新表(t1)<br><br><span class="hljs-meta">#db2 create table t1 like t2</span><br><br><span class="hljs-number">20</span>、将一个表t1的数据导入到另一个表t2<br><br><span class="hljs-meta">#db2 &quot;insert into t1 select * from t2&quot;</span><br><br><span class="hljs-number">21</span>、 查询表<br><br><span class="hljs-meta">#db2 &quot;select * from table name where ...&quot;</span><br><br><span class="hljs-number">22</span>、 显示表结构<br><br><span class="hljs-meta">#db2 describe table tablename</span><br><br><span class="hljs-number">23</span>、 修改列<br><br><span class="hljs-meta">#db2 alter table [tablename] alter column [columname] set data type varchar(24)</span><br><br>======脚本文件操作命令=======<br><br><span class="hljs-number">24</span>、 执行脚本文件<br><br><span class="hljs-meta">#db2 -tvf scripts.sql</span><br><br><span class="hljs-number">25</span>、帮助命令<br><br>* 查看命令帮助<br><br><span class="hljs-meta">#db2 ? db2start</span><br><br>* 查看错误码信息<br><br><span class="hljs-meta">#db2 ? 22001</span><br><br>* memo: 详细命令请使用&quot;db2 ? &quot;进行查看。<br><br>=========================<br><br><span class="hljs-number">26</span>、备份数据库<br><br><span class="hljs-meta">#db2 backup db</span><br><br>备注：执行以上命令之前需要断开数据库连接<br><br><span class="hljs-number">27</span>、在线备份数据库<br><br><span class="hljs-meta">#db2 -v &quot;BACKUP DATABASE ONLINE TO WITH 2 BUFFERS BUFFER 1024 INCLUDE LOGS WITHOUT PROMPTING&quot;</span><br><br><span class="hljs-number">28</span>、恢复数据库<br><br><span class="hljs-meta">#db2 restore db</span><br><br><span class="hljs-number">29</span>、在线恢复数据库<br><br><span class="hljs-meta">#db2 &quot;RESTORE DB TO LOGTARGET WITHOUT PROMPTING&quot;</span><br><br><span class="hljs-meta">#db2 &quot;ROLLFORWARD DB TO END OF LOGS AND STOP&quot; ...</span><br><br><span class="hljs-number">30</span>、导出数据文件<br><br><span class="hljs-meta">#db2move export</span><br><br>[-sn ]<br><br>[-tn ]<br><br><span class="hljs-number">31</span>、导入数据文件<br><br><span class="hljs-meta">#db2move import</span><br><br><span class="hljs-number">32</span>、获取db2数据库管理配置环境信息<br><br><span class="hljs-meta">#db2 get dbm cfg</span><br><br><span class="hljs-number">33</span>、.获取db2某个数据库数据库管理配置环境信息<br><br><span class="hljs-meta">#db2 get db cfg for</span><br><br>或者：连接至某个数据库以后执行db2 <span class="hljs-keyword">get</span> db cfg<br><br><span class="hljs-number">34</span>、更改db2日志空间的大小<br><br>备注：以下命令为了防止db2数据库过份使用硬盘空间而设，仅用于开发者自己机器上的db2，如果是服务器，则参数需要修改。<br><br><span class="hljs-meta">#db2 UPDATE DB CFG FOR USING logretain OFF logprimary 3 logsecond 2 logfilsiz 25600;</span><br><br>如果页大小是<span class="hljs-number">4</span>KB，则以上命令创建<span class="hljs-number">3</span>个<span class="hljs-number">100</span>M的日志文件，占用<span class="hljs-number">300</span>MB硬盘空间。<span class="hljs-number">25600</span>*<span class="hljs-number">4</span>KB=<span class="hljs-number">102400</span>KB。<br><br><span class="hljs-number">35</span>、创建临时表空间<br><br><span class="hljs-meta">#DB2 CREATE USER TEMPORARY TABLESPACE STMASPACE PAGESIZE 32 K MANAGED BY DATABASE USING (FILE &#x27;D:\DB2_TAB\STMASPACE.F1&#x27; 10000)</span><br><br>EXTENTSIZE <span class="hljs-number">256</span><br><br><span class="hljs-number">36</span>、获取数据库管理器的快照数据<br><br><span class="hljs-meta">#db2 –v get snapshot for dbm</span><br><br><span class="hljs-number">37</span>、显示进行程号<br><br><span class="hljs-meta">#db2 list applications show detail</span><br><br>===================================================<br><br>一、加载数据：<br><br><span class="hljs-number">1</span>、 以默认分隔符加载,默认为“,”号<br><br>db2 &quot;import from btpoper.txt of del insert into btpoper&quot;<br><br><span class="hljs-number">2</span>、 以指定分隔符“|”加载<br><br>db2 &quot;import from btpoper.txt of del modified by coldel| insert into btpoper&quot;<br><br>二、卸载数据：<br><br><span class="hljs-number">1</span>、 卸载一个表中全部数据<br><br>db2 &quot;export to btpoper.txt of del select * from btpoper&quot;<br><br>db2 &quot;export to btpoper.txt of del modified by coldel| select * from btpoper&quot;<br><br><span class="hljs-number">2</span>、 带条件卸载一个表中数据<br><br>db2 &quot;export to btpoper.txt of del select * from btpoper where brhid=&#x27;907020000&#x27;&quot;<br><br>db2 &quot;export to cmmcode.txt of del select * from cmmcode where codtp=&#x27;01&#x27;&quot;<br><br>db2 &quot;export to cmmcode.txt of del modified by coldel| select * from cmmcode where codtp=&#x27;01&#x27;&quot;<br><br>三、查询数据结构及数据：<br><br>db2 &quot;select * from btpoper&quot;<br><br>db2 &quot;select * from btpoper where brhid=&#x27;907020000&#x27; and oprid=&#x27;0001&#x27;&quot;<br><br>db2 &quot;select oprid,oprnm,brhid,passwd from btpoper&quot;<br><br>四、删除表中数据：<br><br>db2 &quot;delete from btpoper&quot;<br><br>db2 &quot;delete from btpoper where brhid=&#x27;907020000&#x27; or brhid=&#x27;907010000&#x27;&quot;<br><br>五、修改表中数据：<br><br>db2 &quot;update svmmst set prtlines=0 where brhid=&#x27;907010000&#x27; and jobtp=&#x27;02&#x27;&quot;<br><br>db2 &quot;update svmmst set prtlines=0 where jobtp=&#x27;02&#x27; or jobtp=&#x27;03&#x27;&quot;<br><br>六、联接数据库<br><br>db2 <span class="hljs-keyword">connect</span> <span class="hljs-keyword">to</span> btpdbs<br><br>七、清除数据库联接<br><br>db2 <span class="hljs-keyword">connect</span> <span class="hljs-keyword">reset</span> 断开数据库连接<br><br>db2 terminate 断开数据库连接<br><br>db2 force applications <span class="hljs-keyword">all</span> 断开所有数据库连接<br><br>八、备份数据库<br><br><span class="hljs-number">1</span>、 db2 backup db btpdbs<br><br><span class="hljs-number">2</span>、 db2move btpdbs export<br><br>db2look -d btpdbs -e -x [-a] -o crttbl.<span class="hljs-keyword">sql</span><br><br>九、恢复数据库<br><br><span class="hljs-number">1</span>、 db2 restore db btpdbs <span class="hljs-keyword">without</span> rolling forward<br><br><span class="hljs-number">2</span>、 db2 -tvf crtdb.<span class="hljs-keyword">sql</span><br><br>crtdb.<span class="hljs-keyword">sql</span>文件内容：<span class="hljs-keyword">create</span> db btpdbs <span class="hljs-keyword">on</span> /db2catalog<br><br>db2 -stvf crttbl.<span class="hljs-keyword">sql</span><br><br>db2move btpdbs <span class="hljs-keyword">import</span><br><br>十、DB2帮助命令：<br><br>db2 ?<br><br>db2 ? restroe<br><br>db2 ? sqlcode (例：db2 ? sql0803) 注：code必须为<span class="hljs-number">4</span>位数，不够<span class="hljs-number">4</span>位，前面补<span class="hljs-number">0</span><br><br>十一、bind命令：将应用程序与数据库作一捆绑,每次恢复数据库后，建议都要做一次bind<br><br>(<span class="hljs-number">1</span>) db2 bind br8200.bnd<br><br>(<span class="hljs-number">2</span>) /btp/bin/bndall /btp/bnd<br><br>/btp/bin/bndall /btp/tran/bnd<br><br>十二、查看数据库参数：<br><br>db2 <span class="hljs-keyword">get</span> dbm cfg<br><br>db2 <span class="hljs-keyword">get</span> db cfg <span class="hljs-keyword">for</span> btpdbs<br><br>十三、修改数据库参数：<br><br>db2 <span class="hljs-keyword">update</span> db cfg <span class="hljs-keyword">for</span> btpdbs <span class="hljs-keyword">using</span> LOGBUFSZ <span class="hljs-number">20</span><br><br>db2 <span class="hljs-keyword">update</span> db cfg <span class="hljs-keyword">for</span> btpdbs <span class="hljs-keyword">using</span> LOGFILSIZ <span class="hljs-number">5120</span><br><br>改完后，应执行以下命令使其生效：<br><br>db2 stop<br><br>db2 <span class="hljs-keyword">start</span><br><br>补充：<br><br>db2 <span class="hljs-keyword">set</span> <span class="hljs-keyword">schema</span> btp 修改当前模式为&quot;btp&quot;<br><br>db2 list tablespaces <span class="hljs-keyword">show</span> detail 查看当前数据库表空间分配状况<br><br>db2 list <span class="hljs-keyword">tablespace</span> containers <span class="hljs-keyword">for</span> <span class="hljs-number">2</span> <span class="hljs-keyword">show</span> detail 查看<span class="hljs-keyword">tablespace</span> id=<span class="hljs-number">2</span>使用容器所在目录<br><br>db2 list application<br><br>db2 list db directory 列出所有数据库<br><br>db2 list active databases 列出所有活动的数据库<br><br>db2 list <span class="hljs-keyword">tables</span> <span class="hljs-keyword">for</span> <span class="hljs-keyword">all</span> 列出当前数据库下所有的表<br><br>db2 list <span class="hljs-keyword">tables</span> <span class="hljs-keyword">for</span> <span class="hljs-keyword">schema</span> btp 列出当前数据库中<span class="hljs-keyword">schema</span>为btp的表<br><br>db2 list tablespaces <span class="hljs-keyword">show</span> detail 显示数据库空间使用情况<br><br>db2 list packages <span class="hljs-keyword">for</span> <span class="hljs-keyword">all</span><br><br>db2 &quot;import from tab76.ixf of ixf commitcount 5000 insert into achact&quot;<br><br>db2 &quot;create table achact_t like achact&quot;<br><br>db2 &quot;rename table achact_t to achact&quot;<br><br>db2 &quot;insert into achact_t select * from achact where txndt&gt;=(select lstpgdt from<br><br>acmact where actno=achact.actno)&quot;<br><br>db2 <span class="hljs-keyword">get</span> <span class="hljs-keyword">snapshot</span> <span class="hljs-keyword">for</span> dynaimic <span class="hljs-keyword">sql</span> <span class="hljs-keyword">on</span> jining<br><br>删除一个实例：<br><br># cd /usr/lpp/db2_07_01/instance<br><br># ./db2idrop InstName<br><br>列出所有DB2实例：<br><br># cd /usr/lpp/db2_07_01/bin<br><br># ./db2ilist<br><br>为数据库建立编目<br><br>$ db2 catalog db btpdbs <span class="hljs-keyword">on</span> /db2catalog<br><br>取消已编目的数据库btpdbs<br><br>$ db2 uncatalog db btpdbs<br><br>查看版本<br><br># db2level<br><br>显示当前数据库管理实例<br><br>$ db2 <span class="hljs-keyword">get</span> instance<br><br>设置实例系统启动时是否自动启动。<br><br>$ db2iauto -<span class="hljs-keyword">on</span> 自动启动<br><br>$ db2iauto -<span class="hljs-keyword">off</span> 不自动启动<br><br>数据库优化命令：<br><br>reorg、runstats<br><br>当数据库经过一段时间使用，数据空间会变得越来越庞大。一些<span class="hljs-keyword">delete</span>掉 的数据仍存放在数据库中，占用数据空间，影响系统性能。<br><br>因此需要定期 运行reorg、runstats命令，清除已<span class="hljs-keyword">delete</span>的数据，优化数据结构。<br><br>db2 reorg <span class="hljs-keyword">table</span> 表名<br><br>db2 runstats <span class="hljs-keyword">on</span> <span class="hljs-keyword">table</span> 表名 <span class="hljs-keyword">with</span> distribution <span class="hljs-keyword">and</span> indexes <span class="hljs-keyword">all</span><br><br>因为要优化的表比较多，所以在/btp/bin目录下提供了一个sh程序runsall，<br><br>可在当天业务结束后，运行runsall，对数据库进行优化<br><br><span class="hljs-number">46</span>、对一张表运行统计信息<br><br><span class="hljs-meta">#db2 -v runstatson table TAB_NAMEand indexes all</span><br><br><span class="hljs-number">47</span>、查看是否对数据库执行了RUNSTATS<br><br><span class="hljs-meta">#db2 -v &quot;select tbname, nleaf, nlevels,stats_timefrom sysibm.sysindexes&quot;</span><br><br><span class="hljs-number">48</span>、更改缓冲池的大小<br><br>缓冲池中，当syscat.bufferpools的npages是<span class="hljs-number">-1</span>时，由数据库的配置参数bufferpage控制缓冲池的大小。<br><br>将npages的值更改为<span class="hljs-number">-1</span>的命令：<br><br><span class="hljs-meta">#db2 -v connect to DB_NAME</span><br><br><span class="hljs-meta">#db2 -v select * from syscat.bufferpools</span><br><br><span class="hljs-meta">#db2 -v alter bufferpoolIBMDEFAULTBP size -1</span><br><br><span class="hljs-meta">#db2 -v connect reset</span><br><br><span class="hljs-meta">#db2 -v terminate</span><br><br>更改数据库配置参数BufferPages的命令如下：<br><br><span class="hljs-meta">#db2 -v update db cfgfor dbnameusing BUFFPAGE bigger_value</span><br><br><span class="hljs-meta">#db2 -v terminate</span><br><br><span class="hljs-number">49</span>、看数据库监视内容列表<br><br><span class="hljs-meta">#db2 -v get monitor switches</span><br><br><span class="hljs-number">50</span>、打开某个数据库监视内容<br><br><span class="hljs-meta">#db2 -v update monitor switches using bufferpoolon</span><br><br><span class="hljs-number">51</span>、获取数据库快照<br><br><span class="hljs-meta">#db2 -v get snapshot for all databases &gt; snap.out</span><br><br><span class="hljs-meta">#db2 -v get snapshot for dbm&gt;&gt; snap.out</span><br><br><span class="hljs-meta">#db2 -v get snapshot for all bufferpools&gt;&gt; snap.out</span><br><br><span class="hljs-meta">#db2 -v terminate</span><br><br><span class="hljs-number">52</span>、重置数据库快照<br><br><span class="hljs-meta">#db2 -v reset monitor all</span><br><br><span class="hljs-number">53</span>、计算缓冲池命中率<br><br>理想情况下缓冲池命中率在<span class="hljs-number">95</span>%以上，计算公式如下：<br><br>(<span class="hljs-number">1</span> -((buffer pool data physical reads + buffer pool <span class="hljs-keyword">index</span> physical reads)<br><br>/(buffer pool data logical reads + pool <span class="hljs-keyword">index</span> logical reads))) *<span class="hljs-number">100</span>%<br><br>=========数据库实例========================<br><br><span class="hljs-number">54</span>、创建db2实例<br><br><span class="hljs-meta">#db2icrt</span><br><br><span class="hljs-number">55</span>、删除db2实例<br><br><span class="hljs-meta">#db2idrop</span><br><br><span class="hljs-number">56</span>、设置当前db2实例<br><br><span class="hljs-meta">#set db2intance=db2</span><br><br><span class="hljs-number">57</span>、显示db2拥有的实例<br><br><span class="hljs-meta">#db2ilist</span><br><br><span class="hljs-number">58</span>、恢复离线增量备份数据库的命令<br><br><span class="hljs-meta">#DB2 RESTORE DATABASE YNDC INCREMENTAL AUTOMATIC FROM D:\backup\autobak\db2 TAKEN AT 20060314232015</span><br><br><span class="hljs-number">59</span>、创建样本数据库<br><br>在unix平台，使用：<br><br><span class="hljs-meta">#sqllib/bin/db2sampl</span><br><br>在windows,os/<span class="hljs-number">2</span>平台，使用：db2sampl e,e是可选参数，指定将创建数据库的驱动器<br><br><span class="hljs-number">60</span>、设置联合数据库为可用(默认联合数据库不可用)<br><br><span class="hljs-meta">#db2 update dbm cfg using federated yes</span><br><br><span class="hljs-number">61</span>、列出数据库中所有的表<br><br><span class="hljs-meta">#db2 list tables</span><br><br><span class="hljs-number">62</span>、数据迁移方法<span class="hljs-number">1</span><br><br>export脚本示例<br><br><span class="hljs-meta">#db2 connect to testdb user test password test</span><br><br><span class="hljs-meta">#db2 &quot;export to aa1.ixf of ixf select * from table1&quot;</span><br><br><span class="hljs-meta">#db2 &quot;export to aa2.ixf of ixf select * from table2&quot;</span><br><br><span class="hljs-meta">#db2 connect reset</span><br><br><span class="hljs-keyword">import</span>脚本示例<br><br><span class="hljs-meta">#db2 connect to testdb user test password test</span><br><br><span class="hljs-meta">#db2 &quot;load from aa1.ixf of ixf replace into table1 COPY NO without prompting &quot;</span><br><br><span class="hljs-meta">#db2 &quot;load from aa2.ixf of ixf replace into table2 COPY NO without prompting &quot;</span><br><br><span class="hljs-meta">#db2 connect reset</span><br><br>查询表中是否有该字段<br><br><span class="hljs-keyword">select</span> <span class="hljs-number">1</span> <span class="hljs-keyword">from</span> syscat.<span class="hljs-keyword">columns</span> <span class="hljs-keyword">where</span> colname=<span class="hljs-string">&#x27;ID_NO&#x27;</span> <span class="hljs-keyword">and</span> tabname=<span class="hljs-string">&#x27;MKTSRV_GLOBAL_DOWN_RECORD&#x27;</span> <span class="hljs-keyword">and</span> tabschema=<span class="hljs-string">&#x27;DB2INST1&#x27;</span>;<br><br>查询重复的数据<br><br><span class="hljs-keyword">select</span> user_code,count(*) <span class="hljs-keyword">from</span> cd_sys_person <span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> user_code <span class="hljs-keyword">having</span> count(*)&gt;<span class="hljs-number">1</span><br><br>语句压缩与指定的表相关联的数据<br><br>reorg <span class="hljs-keyword">table</span> <span class="hljs-built_in">TABLE_NAME</span><br><br>解锁表<br><br><span class="hljs-keyword">load</span> <span class="hljs-keyword">from</span> /dev/<span class="hljs-keyword">null</span> <span class="hljs-keyword">of</span> del terminate <span class="hljs-keyword">into</span> <span class="hljs-built_in">TABLE_NAME</span><br><br>创建索引<br><br><span class="hljs-keyword">Create</span> <span class="hljs-keyword">index</span> 索引名 <span class="hljs-keyword">on</span> 表名(字段<span class="hljs-number">1</span>,字段<span class="hljs-number">2</span>)<br><br>刷新表<br><br>runstats <span class="hljs-keyword">on</span> <span class="hljs-keyword">table</span> talblename <span class="hljs-keyword">and</span> indexes <span class="hljs-keyword">all</span><br><br>runstats <span class="hljs-keyword">on</span> <span class="hljs-keyword">table</span> aiapp.mda_xxxxx <span class="hljs-keyword">and</span> <span class="hljs-keyword">index</span> <span class="hljs-keyword">all</span><br><br>查看索引<br><br><span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> syscat.indexes <span class="hljs-keyword">where</span> tabname=<span class="hljs-string">&#x27;ZHYXZS_KB_SC_END&#x27;</span>;<br><br>重新连接<br><br><span class="hljs-keyword">connect</span> <span class="hljs-keyword">reset</span><br><br>中断数据库连接<br><br>disconnect db2_gcb<br><br>建立视图<br><br><span class="hljs-keyword">create</span> <span class="hljs-keyword">view</span> V_zjt_tables <span class="hljs-keyword">as</span> <span class="hljs-keyword">select</span> tabschema,tabname <span class="hljs-keyword">from</span> zjt_tables;<br><br>建立触发器<br><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TRIGGER</span> zjt_tables_del<br><br><span class="hljs-keyword">AFTER</span> <span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">ON</span> zjt_tables<br><br><span class="hljs-keyword">REFERENCING OLD</span> <span class="hljs-keyword">AS</span> O<br><br><span class="hljs-keyword">FOR</span> <span class="hljs-keyword">EACH</span> <span class="hljs-keyword">ROW</span> MODE DB2SQL<br><br><span class="hljs-keyword">Insert</span> <span class="hljs-keyword">into</span> zjt_tables1<br><br><span class="hljs-keyword">values</span>(substr(o.tabschema,<span class="hljs-number">1</span>,<span class="hljs-number">8</span>),substr(o.tabname,<span class="hljs-number">1</span>,<span class="hljs-number">10</span>))<br><br>建立唯一性索引<br><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">UNIQUE</span> <span class="hljs-keyword">INDEX</span> I_ztables_tabname <span class="hljs-keyword">ON</span> zjt_tables(tabname);<br><br>查看列<br><br><span class="hljs-keyword">select</span> SUBSTR(COLNAME,<span class="hljs-number">1</span>,<span class="hljs-number">20</span>) <span class="hljs-keyword">as</span> 列名,TYPENAME <span class="hljs-keyword">as</span> 类型,LENGTH <span class="hljs-keyword">as</span> 长度 <span class="hljs-keyword">from</span> <span class="hljs-keyword">columns</span> <span class="hljs-keyword">where</span> tabname=<span class="hljs-string">&#x27;ZJT_TABLES&#x27;</span>;<br><br>查看表结构<br><br>db2 describe <span class="hljs-keyword">table</span> user1.department<br><br>db2 describe <span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> <span class="hljs-keyword">user</span>.<span class="hljs-keyword">tables</span><br><br>查看表的索引<br><br>db2 describe indexes <span class="hljs-keyword">for</span> <span class="hljs-keyword">table</span> user1.department<br><br>查看索引<br><br><span class="hljs-keyword">select</span> indname <span class="hljs-keyword">from</span> indexes <span class="hljs-keyword">where</span> indname=<span class="hljs-string">&#x27;I_ZTABLES_TABNAME&#x27;</span>;<br><br>查看视图<br><br><span class="hljs-keyword">select</span> viewname <span class="hljs-keyword">from</span> views <span class="hljs-keyword">where</span> viewname=<span class="hljs-string">&#x27;V_ZJT_TABLES&#x27;</span>;<br><br>查看存贮过程<br><br><span class="hljs-keyword">SELECT</span> SUBSTR(PROCSCHEMA,<span class="hljs-number">1</span>,<span class="hljs-number">15</span>),SUBSTR(PROCNAME,<span class="hljs-number">1</span>,<span class="hljs-number">15</span>) <span class="hljs-keyword">FROM</span> SYSCAT.<span class="hljs-keyword">PROCEDURES</span>;<br><br>类型转换(<span class="hljs-keyword">cast</span>)<br><br>ip datatype:<span class="hljs-type">varchar</span><br><br><span class="hljs-keyword">select</span> cast(ip <span class="hljs-keyword">as</span> <span class="hljs-type">integer</span>)+<span class="hljs-number">50</span> <span class="hljs-keyword">from</span> log_comm_failed<br><br>关于从db2 导入导出数据的问题<br><br>DB2中所谓的数据移动，包括：<br><br><span class="hljs-number">1.</span> 数据的导入(<span class="hljs-keyword">Import</span>)<br><br><span class="hljs-number">2.</span> 数据的导出(Export)<br><br><span class="hljs-number">3.</span> 数据的装入(<span class="hljs-keyword">Load</span>)<br><br><span class="hljs-number">10</span>、db2 <span class="hljs-keyword">connect</span> <span class="hljs-keyword">reset</span> 或 db2 terminate <span class="hljs-comment">--断开与数据库的连接</span><br><br><span class="hljs-number">11</span>、db2set db2codepage=<span class="hljs-number">1208</span> <span class="hljs-comment">--修改页编码为1208</span><br><br><span class="hljs-number">12</span>、db2 describe <span class="hljs-keyword">table</span> <span class="hljs-comment">--查看表结构</span><br><br><span class="hljs-number">13</span>、db2 list <span class="hljs-keyword">tables</span> <span class="hljs-comment">--查看数据库中所有表结构</span><br><br>list <span class="hljs-keyword">tables</span> <span class="hljs-keyword">for</span> <span class="hljs-keyword">system</span> <span class="hljs-comment">--列出所有系统表</span><br><br><span class="hljs-number">14</span>、db2 list tablespaces <span class="hljs-comment">--列出表空间</span><br><br>二、高级篇<br><br><span class="hljs-number">15</span>、<span class="hljs-keyword">fetch first</span> <span class="hljs-number">10</span> <span class="hljs-keyword">rows</span> <span class="hljs-keyword">only</span> <span class="hljs-comment">--列出表中前10条数据</span><br><br>例如：<span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> <span class="hljs-keyword">fetch first</span> <span class="hljs-number">10</span> <span class="hljs-keyword">rows</span> <span class="hljs-keyword">only</span><br><br><span class="hljs-number">16</span>、coalesce(字段名，转换后的值) <span class="hljs-comment">--对是null的字段进行值转换</span><br><br>例如：<span class="hljs-keyword">select</span> coalesce(id,<span class="hljs-number">1</span>) <span class="hljs-keyword">from</span> <span class="hljs-comment">--对表中id如果为null转换成1</span><br><br><span class="hljs-number">17</span>、dayofweek(日期) <span class="hljs-comment">--计算出日期中是周几(1是周日，2是周一.......7是周六)</span><br><br>dayofweek_iso <span class="hljs-comment">--计算出日期中是周几(1是周一.......7是周日)</span><br><br>例如：dayofweek(<span class="hljs-type">date</span>(<span class="hljs-number">2008</span><span class="hljs-number">-01</span><span class="hljs-number">-16</span>)) <span class="hljs-comment">--它会返回是4，代表星期三</span><br><br>dayofweek_iso(<span class="hljs-type">date</span>(<span class="hljs-number">2008</span><span class="hljs-number">-01</span><span class="hljs-number">-16</span>)) <span class="hljs-comment">--它会返回是3，代表星期三</span><br><br><span class="hljs-number">18</span>、dayofyear(日期) <span class="hljs-comment">--一年中的第几天，范围在1-366范围之内</span><br><br>注意：参数中日期的格式是YYYY-MM-DD的形式，如果不是需要进行转换，否则函数不能使用<br><br>例如：日期是<span class="hljs-number">20080116</span>必须要进行转换<br><br>dayofweek(concat(concat(concat(substr(openDate,<span class="hljs-number">1</span>,<span class="hljs-number">4</span>),<span class="hljs-string">&#x27;-&#x27;</span>),concat(substr(openDate,<span class="hljs-number">5</span>,<span class="hljs-number">2</span>),<span class="hljs-string">&#x27;-&#x27;</span>)),substr(openDate,<span class="hljs-number">7</span>,<span class="hljs-number">2</span>))) <span class="hljs-keyword">as</span> week)<br><br>这样格式正确的。<br><br><span class="hljs-number">19</span>、concatt(参数<span class="hljs-number">1</span>，连接值) <span class="hljs-comment">--把参数１加上连接值组成一个新值。</span><br><br>例如：　concat(<span class="hljs-string">&#x27;aa&#x27;</span>,<span class="hljs-string">&#x27;b&#x27;</span>) <span class="hljs-comment">--返回是aab</span><br><br>把oracle表导入到db2数据库中，有些字段类型需要进行转换，具体看：oracle与db2数据类型转换<br><br>启动DB2服务：db2start<br><br>关闭DB2服务: db2stop<br><br>一、加载数据：<br><br><span class="hljs-number">1</span>、 以默认分隔符加载,默认为“,”号<br><br>db2 &quot;import from btpoper.txt of del insert into btpoper&quot;<br><br><span class="hljs-number">2</span>、 以指定分隔符“|”加载<br><br>db2 &quot;import from btpoper.txt of del modified by coldel| insert into btpoper&quot;<br><br>二、卸载数据：<br><br><span class="hljs-number">1</span>、 卸载一个表中全部数据<br><br>db2 &quot;export to btpoper.txt of del select * from btpoper&quot;<br><br>db2 &quot;export to btpoper.txt of del modified by coldel| select * from btpoper&quot;<br><br><span class="hljs-number">2</span>、 带条件卸载一个表中数据<br><br>db2 &quot;export to btpoper.txt of del select * from btpoper where brhid=&#x27;907020000&#x27;&quot;<br><br>db2 &quot;export to cmmcode.txt of del select * from cmmcode where codtp=&#x27;01&#x27;&quot;<br><br>db2 &quot;export to cmmcode.txt of del modified by coldel| select * from cmmcode where codtp=&#x27;01&#x27;&quot;<br><br>三、查询数据结构及数据：<br><br>db2 &quot;select * from btpoper&quot;<br><br>db2 &quot;select * from btpoper where brhid=&#x27;907020000&#x27; and oprid=&#x27;0001&#x27;&quot;<br><br>db2 &quot;select oprid,oprnm,brhid,passwd from btpoper&quot;<br><br>四、删除表中数据：<br><br>db2 &quot;delete from btpoper&quot;<br><br>db2 &quot;delete from btpoper where brhid=&#x27;907020000&#x27; or brhid=&#x27;907010000&#x27;&quot;<br><br>五、修改表中数据：<br><br>db2 &quot;update svmmst set prtlines=0 where brhid=&#x27;907010000&#x27; and jobtp=&#x27;02&#x27;&quot;<br><br>db2 &quot;update svmmst set prtlines=0 where jobtp=&#x27;02&#x27; or jobtp=&#x27;03&#x27;&quot;<br><br>六、联接数据库<br><br>db2 <span class="hljs-keyword">connect</span> <span class="hljs-keyword">to</span> btpdbs<br><br>七、清除数据库联接<br><br>db2 <span class="hljs-keyword">connect</span> <span class="hljs-keyword">reset</span> 断开数据库连接<br><br>db2 terminate 断开数据库连接<br><br>db2 force applications <span class="hljs-keyword">all</span> 断开所有数据库连接<br><br>八、备份数据库<br><br><span class="hljs-number">1</span>、 db2 backup db btpdbs<br><br><span class="hljs-number">2</span>、 db2move btpdbs export<br><br>db2look -d btpdbs -e -x [-a] -o crttbl.<span class="hljs-keyword">sql</span><br><br>九、恢复数据库<br><br><span class="hljs-number">1</span>、 db2 restore db btpdbs <span class="hljs-keyword">without</span> rolling forward<br><br><span class="hljs-number">2</span>、 db2 -tvf crtdb.<span class="hljs-keyword">sql</span><br><br>crtdb.<span class="hljs-keyword">sql</span>文件内容：<span class="hljs-keyword">create</span> db btpdbs <span class="hljs-keyword">on</span> /db2catalog<br><br>db2 -stvf crttbl.<span class="hljs-keyword">sql</span><br><br>db2move btpdbs <span class="hljs-keyword">import</span><br><br>十、DB2帮助命令：<br><br>db2 ?<br><br>db2 ? restroe<br><br>db2 ? sqlcode (例：db2 ? sql0803) 注：code必须为<span class="hljs-number">4</span>位数，不够<span class="hljs-number">4</span>位，前面补<span class="hljs-number">0</span><br><br>十一、bind命令：将应用程序与数据库作一捆绑,每次恢复数据库后，建议都要做一次bind<br><br>(<span class="hljs-number">1</span>) db2 bind br8200.bnd<br><br>(<span class="hljs-number">2</span>) /btp/bin/bndall /btp/bnd<br><br>/btp/bin/bndall /btp/tran/bnd<br><br>十二、查看数据库参数：<br><br>db2 <span class="hljs-keyword">get</span> dbm cfg<br><br>db2 <span class="hljs-keyword">get</span> db cfg <span class="hljs-keyword">for</span> btpdbs<br><br>十三、修改数据库参数：<br><br>db2 <span class="hljs-keyword">update</span> db cfg <span class="hljs-keyword">for</span> btpdbs <span class="hljs-keyword">using</span> LOGBUFSZ <span class="hljs-number">20</span><br><br>db2 <span class="hljs-keyword">update</span> db cfg <span class="hljs-keyword">for</span> btpdbs <span class="hljs-keyword">using</span> LOGFILSIZ <span class="hljs-number">5120</span><br><br>改完后，应执行以下命令使其生效：<br><br>db2 stop<br><br>db2 <span class="hljs-keyword">start</span><br><br>补充：<br><br>db2 <span class="hljs-keyword">set</span> <span class="hljs-keyword">schema</span> btp 修改当前模式为&quot;btp&quot;<br><br>db2 list tablespaces <span class="hljs-keyword">show</span> detail 查看当前数据库表空间分配状况<br><br>db2 list <span class="hljs-keyword">tablespace</span> containers <span class="hljs-keyword">for</span> <span class="hljs-number">2</span> <span class="hljs-keyword">show</span> detail 查看<span class="hljs-keyword">tablespace</span> id=<span class="hljs-number">2</span>使用容器所在目录<br><br>db2 list application<br><br>db2 list db directory 列出所有数据库<br><br>db2 list active databases 列出所有活动的数据库<br><br>db2 list <span class="hljs-keyword">tables</span> <span class="hljs-keyword">for</span> <span class="hljs-keyword">all</span> 列出当前数据库下所有的表<br><br>db2 list <span class="hljs-keyword">tables</span> <span class="hljs-keyword">for</span> <span class="hljs-keyword">schema</span> btp 列出当前数据库中<span class="hljs-keyword">schema</span>为btp的表<br><br>db2 list tablespaces <span class="hljs-keyword">show</span> detail 显示数据库空间使用情况<br><br>db2 list packages <span class="hljs-keyword">for</span> <span class="hljs-keyword">all</span><br><br>db2 &quot;import from tab76.ixf of ixf commitcount 5000 insert into achact&quot;<br><br>db2 &quot;create table achact_t like achact&quot;<br><br>db2 &quot;rename table achact_t to achact&quot;<br><br>db2 &quot;insert into achact_t select * from achact where txndt&gt;=(select lstpgdt from<br><br>acmact where actno=achact.actno)&quot;<br><br>db2 <span class="hljs-keyword">get</span> <span class="hljs-keyword">snapshot</span> <span class="hljs-keyword">for</span> dynaimic <span class="hljs-keyword">sql</span> <span class="hljs-keyword">on</span> jining<br><br>删除一个实例：<br><br># cd /usr/lpp/db2_07_01/instance<br><br># ./db2idrop InstName<br><br>列出所有DB2实例：<br><br># cd /usr/lpp/db2_07_01/bin<br><br># ./db2ilist<br><br>为数据库建立编目<br><br>$ db2 catalog db btpdbs <span class="hljs-keyword">on</span> /db2catalog<br><br>取消已编目的数据库btpdbs<br><br>$ db2 uncatalog db btpdbs<br><br>查看版本<br><br># db2level<br><br>显示当前数据库管理实例<br><br>$ db2 <span class="hljs-keyword">get</span> instance<br><br>设置实例系统启动时是否自动启动。<br><br>$ db2iauto -<span class="hljs-keyword">on</span> 自动启动<br><br>$ db2iauto -<span class="hljs-keyword">off</span> 不自动启动<br><br>数据库优化命令：<br><br>reorg、runstats<br><br>当数据库经过一段时间使用，数据空间会变得越来越庞大。一些<span class="hljs-keyword">delete</span>掉<br><br>的数据仍存放在数据库中，占用数据空间，影响系统性能。因此需要定期<br><br>运行reorg、runstats命令，清除已<span class="hljs-keyword">delete</span>的数据，优化数据结构。<br><br>db2 reorg <span class="hljs-keyword">table</span> 表名<br><br>db2 runstats <span class="hljs-keyword">on</span> <span class="hljs-keyword">table</span> 表名 <span class="hljs-keyword">with</span> distribution <span class="hljs-keyword">and</span> indexes <span class="hljs-keyword">all</span><br><br>因为要优化的表比较多，所以在/btp/bin目录下提供了一个sh程序runsall，<br><br>可在当天业务结束后，运行runsall，对数据库进行优化<br><br></code></pre></td></tr></table></figure>



<h2 id="7-DB2查看端口号"><a href="#7-DB2查看端口号" class="headerlink" title="7. DB2查看端口号"></a>7. DB2查看端口号</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br></pre></td><td class="code"><pre><code class="hljs shell"><br>C:\Users\db2admin&gt;db2 get dbm cfg<br>DB21061E  未初始化命令行环境。<br><br>C:\Users\db2admin&gt;db2cmd<br><br>C:\Users\db2admin&gt;<br><br>C:\Users\db2admin&gt;db2 get dbm cfg<br><br>          数据库管理器配置<br><br>     节点类型                                            = 带有本地客户机和远程<br>客户机的企业服务器版<br><br> 数据库管理器配置发行版级别                              = 0x1500<br><br> CPU 速度（毫秒/指令）                       (CPUSPEED) = 1.613843e-007<br> 通信带宽（MB/秒）                     (COMM_BANDWIDTH) = 1.000000e+002<br><br> 最大并发活动数据库数                            (NUMDB) = 32<br> 联合数据库系统支持                          (FEDERATED) = NO<br> 事务处理器监视器名                        (TP_MON_NAME) =<br><br> 缺省对方付费帐户                      (DFT_ACCOUNT_STR) =<br><br> Java Development Kit 安装路径（JDK_PATH）               = D:\PROGRA~1\IBM\SQLLI<br>B\java\jdk<br><br> 诊断错误捕获级别                            (DIAGLEVEL) = 3<br> 通知级别                                  (NOTIFYLEVEL) = 3<br> 诊断数据目录路径                             (DIAGPATH) = D:\DEV\DB2\\IBM\DB2\D<br>B2COPY1\DB2\ $m<br> 当前成员已解析 DIAGPATH                        = D:\DEV\DB2\\IBM\DB2\DB2COPY1\D<br>B2\DIAG0000\<br> 备用诊断数据目录路径 (ALT_DIAGPATH) =<br> 当前成员已解析 ALT_DIAGPATH                    =<br> 轮转 db2diag 和通知日志的大小（MB）          (DIAGSIZE) = 0<br><br> 缺省数据库监视器开关<br>   缓冲池                              (DFT_MON_BUFPOOL) = OFF<br>   锁定                                   (DFT_MON_LOCK) = OFF<br>   排序                                   (DFT_MON_SORT) = OFF<br>   语句                                   (DFT_MON_STMT) = OFF<br>   表                                    (DFT_MON_TABLE) = OFF<br>   时间戳记                          (DFT_MON_TIMESTAMP) = ON<br>   工作单元                                (DFT_MON_UOW) = OFF<br> 监视实例和数据库的运行状况                 (HEALTH_MON) = OFF<br><br> SYSADM 组名                              (SYSADM_GROUP) =<br> SYSCTRL 组名                            (SYSCTRL_GROUP) =<br> SYSMAINT 组名                          (SYSMAINT_GROUP) =<br> SYSMON 组名                              (SYSMON_GROUP) =<br><br> 客户机用户标识-密码插件                (CLNT_PW_PLUGIN) =<br> 客户机 Kerberos 插件                  (CLNT_KRB_PLUGIN) = IBMkrb5<br> 组插件                                   (GROUP_PLUGIN) =<br> 本地授权的 GSS 插件                   (LOCAL_GSSPLUGIN) =<br> 服务器插件方式                        (SRV_PLUGIN_MODE) = UNFENCED<br> GSS 插件的服务器列表            (SRVCON_GSSPLUGIN_LIST) =<br> 服务器用户标识-密码插件              (SRVCON_PW_PLUGIN) =<br> 服务器连接认证                            (SRVCON_AUTH) = NOT_SPECIFIED<br> 集群管理器                                              =<br><br> 数据库管理器认证                       (AUTHENTICATION) = SERVER<br> 备用认证                           (ALTERNATE_AUTH_ENC) = NOT_SPECIFIED<br> 没有权限就允许编目                     (CATALOG_NOAUTH) = NO<br> 信赖所有客户机                         (TRUST_ALLCLNTS) = YES<br> 可信的客户机认证                       (TRUST_CLNTAUTH) = CLIENT<br> 绕过联合认证                               (FED_NOAUTH) = NO<br><br> 缺省数据库路径                              (DFTDBPATH) = D:<br><br> 数据库监视器堆大小 (4KB)                  (MON_HEAP_SZ) = AUTOMATIC(66)<br> “Java 虚拟机”堆大小 (4KB)              (JAVA_HEAP_SZ) = 65536<br> 审计缓冲区大小 (4KB)                     (AUDIT_BUF_SZ) = 0<br> 全局实例内存（% 或 4KB）       (INSTANCE_MEMORY) = AUTOMATIC(1215444)<br> 成员实例内存（% 或 4KB）                         = GLOBAL<br> 代理程序的堆栈大小                     (AGENT_STACK_SZ) = 16<br> 排序堆阈值 (4KB)                           (SHEAPTHRES) = 0<br><br> 目录高速缓存支持                            (DIR_CACHE) = YES<br><br> 应用程序支持层堆大小 (4KB)                  (ASLHEAPSZ) = 15<br> 最大请求者 I/O 块大小（以字节计）            (RQRIOBLK) = 65535<br> 已调速实用程序对工作负载的影响        (UTIL_IMPACT_LIM) = 10<br><br> 代理程序的优先级                             (AGENTPRI) = SYSTEM<br> 代理程序池大小                         (NUM_POOLAGENTS) = AUTOMATIC(100)<br> 池中的初始代理程序数                   (NUM_INITAGENTS) = 0<br> 最大协调代理程序数                    (MAX_COORDAGENTS) = AUTOMATIC(200)<br> 最大客户机连接数                      (MAX_CONNECTIONS) = AUTOMATIC(MAX_COORDAG<br>ENTS)<br><br> 保留受防护的进程                           (KEEPFENCED) = YES<br> 合用受防护的进程的数目                    (FENCED_POOL) = AUTOMATIC(MAX_COORDAG<br>ENTS)<br> 受防护的进程的初始数目                 (NUM_INITFENCED) = 0<br><br> 索引重新创建时间和重做索引构建               (INDEXREC) = RESTART<br><br> 事务管理器数据库名称                      (TM_DATABASE) = 1ST_CONN<br> 事务再同步时间间隔（秒）              (RESYNC_INTERVAL) = 180<br><br> SPM 名称                                     (SPM_NAME) = PC_20211<br> SPM 日志大小                          (SPM_LOG_FILE_SZ) = 256<br> SPM 再同步代理程序限制                 (SPM_MAX_RESYNC) = 20<br> SPM 日志路径                             (SPM_LOG_PATH) =<br><br> TCP/IP 服务名称                              (SVCENAME) = db2c_DB2<br> 发现方式                                     (DISCOVER) = SEARCH<br> 发现服务器实例                          (DISCOVER_INST) = ENABLE<br><br> SSL 服务器 keydb 文件                   (SSL_SVR_KEYDB) =<br> SSL 服务器隐藏文件                      (SSL_SVR_STASH) =<br> SSL 服务器证书标签                      (SSL_SVR_LABEL) =<br> SSL 服务名称                             (SSL_SVCENAME) =<br> SSL 密码规范                          (SSL_CIPHERSPECS) =<br> SSL 版本                                 (SSL_VERSIONS) =<br> SSL 客户机 keydb 文件                  (SSL_CLNT_KEYDB) =<br> SSL 客户机隐藏文件                     (SSL_CLNT_STASH) =<br><br> 最大查询并行度                        (MAX_QUERYDEGREE) = ANY<br> 启用分区内并行性                       (INTRA_PARALLEL) = NO<br><br> 每个查询的最大异步 TQ 数              (FEDERATED_ASYNC) = 0<br><br> FCM 缓冲区的数目                      (FCM_NUM_BUFFERS) = AUTOMATIC(4096)<br> FCM 缓冲区大小                            (FCM_BUFFER_SIZE) = 32768<br> FCM 通道的数目                        (FCM_NUM_CHANNELS) = AUTOMATIC(2048)<br> FCM 并行性                             (FCM_PARALLELISM) = AUTOMATIC(1)<br> 节点连接耗用时间（秒）                    (CONN_ELAPSE) = 10<br> 最大节点连接重试次数                  (MAX_CONNRETRIES) = 5<br> 节点间的最大时差（分钟）                (MAX_TIME_DIFF) = 60<br><br> db2start/db2stop 超时（分钟）         (START_STOP_TIME) = 10<br><br> WLM 分派器已启用                       (WLM_DISPATCHER) = NO<br> WLM 分派器并行性                      (WLM_DISP_CONCUR) = COMPUTED<br> WLM 分派器 CPU 份额已启用         (WLM_DISP_CPU_SHARES) = NO<br> WLM 分派器最低使用率 (%) (WLM_DISP_MIN_UTIL) = 5<br><br> 通信缓冲区出口库列表                   (COMM_EXIT_LIST) =<br> 当前有效体系结构级别 (CUR_EFF_ARCH_LVL) = V:11 R:5 M:7 F:0 I:0 SB:0<br> 当前有效代码级别 (CUR_EFF_CODE_LVL) = V:11 R:5 M:7 F:0 I:0 SB:0<br><br> 密钥库类型                           (KEYSTORE_TYPE) = NONE<br> 密钥库位置                   (KEYSTORE_LOCATION) =<br><br> Python 运行时的路径                (PYTHON_PATH) =<br> R 运行时的路径                              (R_PATH) =<br><br> 多重部件上载部件大小 (MULTIPARTSIZEMB) = 100<br><br><br>C:\Users\db2admin&gt;<br></code></pre></td></tr></table></figure>

<p>查看DB2数据库占用的端口号，分为windows和linux系统查看方式，如下：</p>
<p>一、linux系统查看DB2占用端口号：  </p>
<p>1.db2start启动了数据库管理器，并且通讯方式配置为TCP&#x2F;IP。  </p>
<p>2.首先切换到db2inst1用户 su - db2inst1  </p>
<p>3.查找TCP&#x2F;IP Service name db2 get dbm cfg | grep -i service  </p>
<p>4.通过上一句命令的输出（如db2c_db2inst1）在&#x2F;etc&#x2F;services文件中找对应的端口号 grep db2c_db2inst1 &#x2F;etc&#x2F;services  </p>
<p>输出 db2c_db2inst1 50000&#x2F;tcp  </p>
<p>其中50000就是db2数据库所占用的端口号  </p>
<p>二、windows系统查看DB2占用端口号方式如下：  </p>
<p>1、使用命令 db2 get dbm cfg  </p>
<p>找到”SVCENAME” 查找到TCP&#x2F;IP 服务名  </p>
<p>2、到系统配置文件里找到service name 对应的 port number  </p>
<p>windows：查看 c:\windows\system32\drivers\etc\services  </p>
<p>aix： 查看 &#x2F;etc&#x2F;services  </p>
<p>如下：  </p>
<p>DB2_DB2 60000&#x2F;tcp  </p>
<p>DB2_DB2_1 60001&#x2F;tcp  </p>
<p>DB2_DB2_2 60002&#x2F;tcp  </p>
<p>DB2_DB2_END 60003&#x2F;tcp  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs bash">c:\windows\system32\drivers\etc\services<br><br>DB2_DB2         20000/tcp<br>DB2_DB2_1       20001/tcp<br>DB2_DB2_2       20002/tcp<br>DB2_DB2_3       20003/tcp<br>DB2_DB2_4       20004/tcp<br>DB2_DB2_END     20005/tcp<br>directplaysrvr  47624/tcp                           <span class="hljs-comment">#Direct Play Server</span><br>directplaysrvr  47624/udp                           <span class="hljs-comment">#Direct Play Server</span><br><br>db2c_DB2    25000/tcp<br></code></pre></td></tr></table></figure>



<p>dbeaver连接异常：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-selector-attr">[jcc]</span><span class="hljs-selector-attr">[t4]</span><span class="hljs-selector-attr">[2043]</span><span class="hljs-selector-attr">[11550]</span><span class="hljs-selector-attr">[4.26.14]</span> 异常 java<span class="hljs-selector-class">.net</span>.ConnectException：打开端口 <span class="hljs-number">25</span>,<span class="hljs-number">000</span> 上服务器 localhost/<span class="hljs-number">127.0</span>.<span class="hljs-number">0.1</span> 的套接字时出错，消息为：Connection refused: connect。 ERRORCODE=-<span class="hljs-number">4499</span>, SQLSTATE=<span class="hljs-number">08001</span><br>  Connection refused: connect<br></code></pre></td></tr></table></figure>


<h2 id="8-SQL-in与exists相关性能问题总结"><a href="#8-SQL-in与exists相关性能问题总结" class="headerlink" title="8. SQL  in与exists相关性能问题总结"></a>8. SQL  in与exists相关性能问题总结</h2><blockquote>
<p>参考: <a target="_blank" rel="noopener" href="https://www.cnblogs.com/syforacle/p/5820624.html">https://www.cnblogs.com/syforacle/p/5820624.html</a></p>
</blockquote>

              
            </div>
            
            <!-- 打赏模块，参考：https://blog.kukmoon.com/7bf76e1d.html -->
            <div style="text-align: center; margin: auto;"><!--自己添加的打赏模块：开始-->
              
            </div> <!--自己添加的打赏模块：结束-->

            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/DB2/" class="category-chain-item">DB2</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/%E6%8A%80%E6%9C%AF/">#技术</a>
      
        <a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/">#数据库</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>DB2学习</div>
      <div>https://chris-z-su.github.io/2022/09/25/数据库/DB2学习/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>Chris</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2022年9月25日</div>
        </div>
      
      
      <div class="license-meta-item">
        <div>许可协议</div>
        <div>
          
            
            
              <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
              <span class="hint--top hint--rounded" aria-label="BY - 署名">
                <i class="iconfont icon-by"></i>
              </span>
              </a>
            
          
        </div>
      </div>
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2022/09/27/%E6%95%B0%E6%8D%AE%E5%BA%93/PLSQL%E5%AD%A6%E4%B9%A0/" title="PLSQL学习">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">PLSQL学习</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2022/09/18/%E6%8A%80%E6%9C%AF/vscode/" title="vscode">
                        <span class="hidden-mobile">vscode</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  <article id="comments" lazyload>
    
  <div id="gitalk-container"></div>
  <script type="text/javascript">
    Fluid.utils.loadComments('#gitalk-container', function() {
      Fluid.utils.createCssLink('/css/gitalk.css')
      Fluid.utils.createScript('https://lib.baomitu.com/gitalk/1.7.2/gitalk.min.js', function() {
        var options = Object.assign(
          {"clientID":"6809b6d7b005b26f279f","clientSecret":"ce8b843f080f2b78f23fc0a19607785882fb66fb","repo":"chris-z-su.github.io","owner":"Chris-z-su","admin":["Chris-z-su"],"language":"zh-CN","labels":["Gitalk"],"perPage":10,"pagerDirection":"last","distractionFreeMode":false,"createIssueManually":true,"proxy":"https://netnr-proxy.cloudno.de/https://github.com/login/oauth/access_token"},
          {
            id: '43eb4fee128b70f2767559f24807e52a'
          }
        )
        var gitalk = new Gitalk(options);
        gitalk.render('gitalk-container');
      });
    });
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


  </article>


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  






<!-- 页面点击小红心 -->
<!-- <script type="text/javascript" src="/js/love.js"></script> -->
<!--单击显示文字 -->
<!-- <script type="text/javascript" src="/js/jquery-3.1.1.min.js"></script> -->
<!-- <script type="text/javascript" src="/js/click_show_text.js"></script> -->
<!--浏览器搞笑标题-->
<script type="text/javascript" src="/js/FunnyTitle.js"></script>

    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
    <div class="statistics">
  
  

  
    
      <span id="busuanzi_container_site_pv" style="display: none">
        总访问量 
        <span id="busuanzi_value_site_pv"></span>
         次
      </span>
    
    
      <span id="busuanzi_container_site_uv" style="display: none">
        总访客数 
        <span id="busuanzi_value_site_uv"></span>
         人
      </span>
    
    
  
</div>

  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  

  

  

  

  

  

  




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.0/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      headingSelector : CONFIG.toc.headingSelector || 'h1,h2,h3,h4,h5,h6',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      collapseDepth   : CONFIG.toc.collapseDepth || 0,
      scrollSmooth    : true,
      headingsOffset  : -boardTop
    });
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }
  });
</script>


  <script>
  (function() {
    var enableLang = CONFIG.code_language.enable && CONFIG.code_language.default;
    var enableCopy = CONFIG.copy_btn;
    if (!enableLang && !enableCopy) {
      return;
    }

    function getBgClass(ele) {
      return Fluid.utils.getBackgroundLightness(ele) >= 0 ? 'code-widget-light' : 'code-widget-dark';
    }

    var copyTmpl = '';
    copyTmpl += '<div class="code-widget">';
    copyTmpl += 'LANG';
    copyTmpl += '</div>';
    jQuery('.markdown-body pre').each(function() {
      var $pre = jQuery(this);
      if ($pre.find('code.mermaid').length > 0) {
        return;
      }
      if ($pre.find('span.line').length > 0) {
        return;
      }

      var lang = '';

      if (enableLang) {
        lang = CONFIG.code_language.default;
        if ($pre[0].children.length > 0 && $pre[0].children[0].classList.length >= 2 && $pre.children().hasClass('hljs')) {
          lang = $pre[0].children[0].classList[1];
        } else if ($pre[0].getAttribute('data-language')) {
          lang = $pre[0].getAttribute('data-language');
        } else if ($pre.parent().hasClass('sourceCode') && $pre[0].children.length > 0 && $pre[0].children[0].classList.length >= 2) {
          lang = $pre[0].children[0].classList[1];
          $pre.parent().addClass('code-wrapper');
        } else if ($pre.parent().hasClass('markdown-body') && $pre[0].classList.length === 0) {
          $pre.wrap('<div class="code-wrapper"></div>');
        }
        lang = lang.toUpperCase().replace('NONE', CONFIG.code_language.default);
      }
      $pre.append(copyTmpl.replace('LANG', lang).replace('code-widget">',
        getBgClass($pre[0]) + (enableCopy ? ' code-widget copy-btn" data-clipboard-snippet><i class="iconfont icon-copy"></i>' : ' code-widget">')));

      if (enableCopy) {
        Fluid.utils.createScript('https://lib.baomitu.com/clipboard.js/2.0.10/clipboard.min.js', function() {
          var clipboard = new window.ClipboardJS('.copy-btn', {
            target: function(trigger) {
              var nodes = trigger.parentNode.childNodes;
              for (var i = 0; i < nodes.length; i++) {
                if (nodes[i].tagName === 'CODE') {
                  return nodes[i];
                }
              }
            }
          });
          clipboard.on('success', function(e) {
            e.clearSelection();
            e.trigger.innerHTML = e.trigger.innerHTML.replace('icon-copy', 'icon-success');
            setTimeout(function() {
              e.trigger.innerHTML = e.trigger.innerHTML.replace('icon-success', 'icon-copy');
            }, 2000);
          });
        });
      }
    });
  })();
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="/js/busuanzi.pure.mini.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
